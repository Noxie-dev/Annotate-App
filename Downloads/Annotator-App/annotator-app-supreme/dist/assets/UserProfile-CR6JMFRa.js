import{j as e,k as Ie,l as Ne,m as Ue,n as we,o as Le,p as Me,q as Re}from"./radix-ui-Dm4GcI-M.js";import{g as $e,a as x}from"./react-vendor-BxpQIQ7B.js";import{a as U,u as Ve}from"./index-CeiQEl0I.js";import{c as I,B as N}from"./button-BU14-tcR.js";import{C as f,d as v,a as T,b as A,c as z}from"./card-BRJUXXhw.js";import{A as Ce,a as Se,b as ke}from"./avatar-Dqh11rFN.js";import{D as Be,a as _e,b as We,c as He,d as Ye,S as V,f as B,g as _,h as W,i as j,T as Te,e as Je}from"./select-BvRLeJVF.js";import{F as Ge,C as Ze,a as qe,u as Ke,o as Xe,s as M}from"./form-vendor-B0nP1T3w.js";import{t as Qe}from"./zod-CPQLszjv.js";import{r as ea}from"./profile-vendor-CNRlCIDN.js";import{I as X}from"./input-B_Pc9ca6.js";import{L as b}from"./label--JKAZs82.js";import{a0 as Ae,X as aa,W as ae,a1 as sa,a2 as ta,a3 as ra,v as ia,a4 as na,i as H,a as la,M as le,e as ca,a5 as oa,a6 as da,F as ma,N as ha,J as ce,U as he,x as ze,B as xa,S as se,a7 as oe,a8 as De,q as Pe,a9 as ga,aa as ua,ab as ya}from"./utils-vendor-DzewcVAv.js";import{T as pa,a as ja,b as ba,c as R}from"./tabs-C8PfzfW2.js";import{B as de}from"./badge-CzkljnjK.js";import{S as fa}from"./separator-UVofwG_Y.js";const va=1,Na=1e6;let re=0;function wa(){return re=(re+1)%Number.MAX_SAFE_INTEGER,re.toString()}const ie=new Map,fe=a=>{if(ie.has(a))return;const t=setTimeout(()=>{ie.delete(a),Q({type:"REMOVE_TOAST",toastId:a})},Na);ie.set(a,t)},Ca=(a,t)=>{switch(t.type){case"ADD_TOAST":return{...a,toasts:[t.toast,...a.toasts].slice(0,va)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?fe(r):a.toasts.forEach(s=>{fe(s.id)}),{...a,toasts:a.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(r=>r.id!==t.toastId)}}},Sa=[];let ne={toasts:[]};function Q(a){ne=Ca(ne,a),Sa.forEach(t=>{t(ne)})}function w({...a}){const t=wa(),r=i=>Q({type:"UPDATE_TOAST",toast:{...i,id:t}}),s=()=>Q({type:"DISMISS_TOAST",toastId:t});return Q({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:i=>{i||s()}}}),{id:t,dismiss:s,update:r}}var ka=ea();const Ta=$e(ka),ee={email:a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.trim()),password:a=>{const t=[];return a.length<8&&t.push("Password must be at least 8 characters long"),/[A-Z]/.test(a)||t.push("Password must contain at least one uppercase letter"),/[a-z]/.test(a)||t.push("Password must contain at least one lowercase letter"),/\d/.test(a)||t.push("Password must contain at least one number"),/[!@#$%^&*(),.?":{}|<>]/.test(a)||t.push("Password must contain at least one special character"),{isValid:t.length===0,errors:t}},phone:a=>{const t=/^\+?[\d\s\-\(\)]+$/,r=a.replace(/\D/g,"");return t.test(a)&&r.length>=10&&r.length<=15},name:a=>/^[a-zA-Z\s\-'\.]+$/.test(a.trim())&&a.trim().length>=2&&a.trim().length<=50,url:a=>{try{return new URL(a),!0}catch{return!1}},timezone:a=>{try{return Intl.DateTimeFormat(void 0,{timeZone:a}),!0}catch{return!1}},fileType:(a,t)=>t.some(r=>a.type.startsWith(r)),fileSize:(a,t)=>{const r=t*1024*1024;return a.size<=r}},G={html:a=>Ta.sanitize(a,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),text:a=>a.trim().replace(/<[^>]*>/g,"").replace(/[<>]/g,"").substring(0,1e3),name:a=>a.trim().replace(/[<>]/g,"").replace(/\s+/g," ").substring(0,50),email:a=>a.toLowerCase().trim(),phone:a=>a.trim().replace(/[^\d\+\-\(\)\s]/g,""),url:a=>a.trim().toLowerCase(),fileName:a=>a.replace(/[^a-zA-Z0-9.-]/g,"_").toLowerCase().substring(0,100),bio:a=>a.trim().replace(/<[^>]*>/g,"").substring(0,500)},Aa=Ge,Ee=x.createContext({}),$=({...a})=>e.jsx(Ee.Provider,{value:{name:a.name},children:e.jsx(Ze,{...a})}),te=()=>{const a=x.useContext(Ee),t=x.useContext(Oe),{getFieldState:r,formState:s}=qe(),i=r(a.name,s);if(!a)throw new Error("useFormField should be used within <FormField>");const{id:h}=t;return{id:h,name:a.name,formItemId:`${h}-form-item`,formDescriptionId:`${h}-form-item-description`,formMessageId:`${h}-form-item-message`,...i}},Oe=x.createContext({}),P=x.forwardRef(({className:a,...t},r)=>{const s=x.useId();return e.jsx(Oe.Provider,{value:{id:s},children:e.jsx("div",{ref:r,className:I("space-y-2",a),...t})})});P.displayName="FormItem";const E=x.forwardRef(({className:a,...t},r)=>{const{error:s,formItemId:i}=te();return e.jsx(b,{ref:r,className:I(s&&"text-red-500 dark:text-red-900",a),htmlFor:i,...t})});E.displayName="FormLabel";const O=x.forwardRef(({...a},t)=>{const{error:r,formItemId:s,formDescriptionId:i,formMessageId:h}=te();return e.jsx(Ie,{ref:t,id:s,"aria-describedby":r?`${i} ${h}`:`${i}`,"aria-invalid":!!r,...a})});O.displayName="FormControl";const Fe=x.forwardRef(({className:a,...t},r)=>{const{formDescriptionId:s}=te();return e.jsx("p",{ref:r,id:s,className:I("text-[0.8rem] text-zinc-500 dark:text-zinc-400",a),...t})});Fe.displayName="FormDescription";const F=x.forwardRef(({className:a,children:t,...r},s)=>{const{error:i,formMessageId:h}=te(),m=i?String(i==null?void 0:i.message):t;return m?e.jsx("p",{ref:s,id:h,className:I("text-[0.8rem] font-medium text-red-500 dark:text-red-900",a),...r,children:m}):null});F.displayName="FormMessage";const za=Xe({name:M().min(2,"Name must be at least 2 characters").max(50,"Name must be less than 50 characters").regex(/^[a-zA-Z\s\-'\.]+$/,"Name contains invalid characters"),email:M().email("Invalid email address"),phone:M().optional().refine(a=>!a||ee.phone(a),"Invalid phone number"),bio:M().max(500,"Bio must be less than 500 characters").optional(),department:M().max(100,"Department must be less than 100 characters").optional(),timezone:M().optional().refine(a=>!a||ee.timezone(a),"Invalid timezone")});function Da({user:a,onClose:t,onSave:r}){const{updateUserProfile:s,uploadAvatar:i,isLoading:h}=U(),[m,o]=x.useState(null),[c,y]=x.useState(null),n=x.useRef(null),p=Ke({resolver:Qe(za),defaultValues:{name:a.name||"",email:a.email||"",phone:a.phone||"",bio:a.bio||"",department:a.department||"",timezone:a.timezone||""}}),C=d=>{var Y;const g=(Y=d.target.files)==null?void 0:Y[0];if(!g)return;if(!ee.fileType(g,["image/"])){w({title:"Invalid file type",description:"Please select an image file",variant:"destructive"});return}if(!ee.fileSize(g,5)){w({title:"File too large",description:"Image must be less than 5MB",variant:"destructive"});return}o(g);const k=new FileReader;k.onload=Z=>{var J;y((J=Z.target)==null?void 0:J.result)},k.readAsDataURL(g)},D=()=>{o(null),y(null),n.current&&(n.current.value="")},L=async d=>{try{let g=a.avatar;m&&(g=await i(m));const k={name:G.name(d.name),email:G.email(d.email),phone:d.phone?G.phone(d.phone):void 0,bio:d.bio?G.bio(d.bio):void 0,department:d.department?G.text(d.department):void 0,timezone:d.timezone||void 0,avatar:g};await s(a.id,k),w({title:"Profile updated",description:"Your profile has been successfully updated"}),r()}catch(g){w({title:"Update failed",description:g instanceof Error?g.message:"Failed to update profile",variant:"destructive"})}},u=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Europe/Berlin","Asia/Tokyo","Asia/Shanghai","Asia/Kolkata","Australia/Sydney"];return e.jsx(Be,{open:!0,onOpenChange:t,children:e.jsxs(_e,{className:"max-w-2xl bg-gray-900 border-gray-700 text-white max-h-[90vh] overflow-y-auto",children:[e.jsxs(We,{children:[e.jsx(He,{children:"Edit Profile"}),e.jsx(Ye,{className:"text-gray-400",children:"Update your personal information and preferences"})]}),e.jsx(Aa,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(L),className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(Ce,{className:"w-20 h-20",children:[e.jsx(Se,{src:c||a.avatar,alt:a.name}),e.jsx(ke,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xl",children:a.name.charAt(0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(N,{type:"button",variant:"outline",size:"sm",onClick:()=>{var d;return(d=n.current)==null?void 0:d.click()},className:"border-gray-600 text-gray-300 hover:bg-gray-800",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Change Photo"]}),(c||m)&&e.jsxs(N,{type:"button",variant:"outline",size:"sm",onClick:D,className:"border-gray-600 text-gray-300 hover:bg-gray-800",children:[e.jsx(aa,{className:"w-4 h-4 mr-2"}),"Remove"]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"JPG, PNG or GIF. Max size 5MB."}),e.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:C,className:"hidden","aria-label":"Upload avatar image"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx($,{control:p.control,name:"name",render:({field:d})=>e.jsxs(P,{children:[e.jsx(E,{children:"Full Name"}),e.jsx(O,{children:e.jsx(X,{...d,className:"bg-gray-800 border-gray-600 text-white",placeholder:"Enter your full name"})}),e.jsx(F,{})]})}),e.jsx($,{control:p.control,name:"email",render:({field:d})=>e.jsxs(P,{children:[e.jsx(E,{children:"Email"}),e.jsx(O,{children:e.jsx(X,{...d,type:"email",className:"bg-gray-800 border-gray-600 text-white",placeholder:"Enter your email"})}),e.jsx(F,{})]})}),e.jsx($,{control:p.control,name:"phone",render:({field:d})=>e.jsxs(P,{children:[e.jsx(E,{children:"Phone Number"}),e.jsx(O,{children:e.jsx(X,{...d,type:"tel",className:"bg-gray-800 border-gray-600 text-white",placeholder:"Enter your phone number"})}),e.jsx(F,{})]})}),e.jsx($,{control:p.control,name:"department",render:({field:d})=>e.jsxs(P,{children:[e.jsx(E,{children:"Department"}),e.jsx(O,{children:e.jsx(X,{...d,className:"bg-gray-800 border-gray-600 text-white",placeholder:"Enter your department"})}),e.jsx(F,{})]})})]}),e.jsx($,{control:p.control,name:"timezone",render:({field:d})=>e.jsxs(P,{children:[e.jsx(E,{children:"Timezone"}),e.jsxs(V,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(O,{children:e.jsx(B,{className:"bg-gray-800 border-gray-600 text-white",children:e.jsx(_,{placeholder:"Select your timezone"})})}),e.jsx(W,{className:"bg-gray-800 border-gray-600",children:u.map(g=>e.jsx(j,{value:g,className:"text-white hover:bg-gray-700",children:g},g))})]}),e.jsx(F,{})]})}),e.jsx($,{control:p.control,name:"bio",render:({field:d})=>{var g;return e.jsxs(P,{children:[e.jsx(E,{children:"Bio"}),e.jsx(O,{children:e.jsx(Te,{...d,className:"bg-gray-800 border-gray-600 text-white min-h-[100px]",placeholder:"Tell us about yourself...",maxLength:500})}),e.jsxs(Fe,{className:"text-gray-400",children:[((g=d.value)==null?void 0:g.length)||0,"/500 characters"]}),e.jsx(F,{})]})}}),e.jsxs(Je,{children:[e.jsx(N,{type:"button",variant:"outline",onClick:t,className:"border-gray-600 text-gray-300 hover:bg-gray-800",children:"Cancel"}),e.jsx(N,{type:"submit",disabled:h,className:"bg-blue-600 hover:bg-blue-700",children:h?"Saving...":"Save Changes"})]})]})})]})})}function ve(){return{theme:"dark",language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC",notifications:{email:!0,push:!0,desktop:!0,mentions:!0,documentUpdates:!0,teamMessages:!0,voiceCalls:!0,quietHours:{enabled:!1,startTime:"22:00",endTime:"08:00"}},annotation:{defaultTool:"highlight",defaultColor:"#fbbf24",strokeWidth:2,fontSize:14,autoSave:!0,showOtherAnnotations:!0,realTimeSync:!0,highlightOpacity:.3},collaboration:{showPresence:!0,allowVoiceCalls:!0,allowScreenShare:!0,autoJoinTeamCalls:!1,shareStatus:!0,allowDirectMessages:!0,showTypingIndicators:!0},privacy:{profileVisibility:"team",showOnlineStatus:!0,allowContactByEmail:!0,dataProcessingConsent:!0,analyticsOptOut:!1,shareUsageData:!0},accessibility:{highContrast:!1,reducedMotion:!1,fontSize:"medium",screenReaderOptimized:!1,keyboardNavigation:!1}}}const S=x.forwardRef(({className:a,...t},r)=>e.jsx(Ne,{className:I("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-zinc-900 data-[state=unchecked]:bg-zinc-200 dark:focus-visible:ring-zinc-300 dark:focus-visible:ring-offset-zinc-950 dark:data-[state=checked]:bg-zinc-50 dark:data-[state=unchecked]:bg-zinc-800",a),...t,ref:r,children:e.jsx(Ue,{className:I("pointer-events-none block h-4 w-4 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0 dark:bg-zinc-950")})}));S.displayName=Ne.displayName;const me=x.forwardRef(({className:a,...t},r)=>e.jsxs(we,{ref:r,className:I("relative flex w-full touch-none select-none items-center",a),...t,children:[e.jsx(Le,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-zinc-900/20 dark:bg-zinc-50/20",children:e.jsx(Me,{className:"absolute h-full bg-zinc-900 dark:bg-zinc-50"})}),e.jsx(Re,{className:"block h-4 w-4 rounded-full border border-zinc-200 border-zinc-900/50 bg-white shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 dark:border-zinc-800 dark:border-zinc-50/50 dark:bg-zinc-950 dark:focus-visible:ring-zinc-300"})]}));me.displayName=we.displayName;function Pa({userId:a,preferences:t}){var p,C,D,L,u,d,g,k,Y,Z,J,xe,ge,ue,ye,pe,je;const{updateUserPreferences:r,isLoading:s}=U(),[i,h]=x.useState(t||ve()),[m,o]=x.useState(!1),c=(l,q,K)=>{h(be=>({...be,[l]:{...be[l],[q]:K}})),o(!0)},y=async()=>{try{const l={theme:i.theme,language:i.language,timezone:i.timezone,notifications:i.notifications,annotation:i.annotation,collaboration:i.collaboration,privacy:i.privacy,accessibility:i.accessibility};await r(a,l),o(!1),w({title:"Preferences saved",description:"Your preferences have been updated successfully"})}catch(l){w({title:"Save failed",description:l instanceof Error?l.message:"Failed to save preferences",variant:"destructive"})}},n=()=>{h(t||ve()),o(!1)};return e.jsxs("div",{className:"space-y-6",children:[m&&e.jsx(f,{className:"bg-blue-900/20 border-blue-700",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-blue-300",children:"You have unsaved changes"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:n,className:"border-gray-600 text-gray-300 hover:bg-gray-800",children:"Reset"}),e.jsx(N,{size:"sm",onClick:y,disabled:s,className:"bg-blue-600 hover:bg-blue-700",children:s?"Saving...":"Save Changes"})]})]})})}),e.jsxs(f,{className:"bg-gray-900 border-gray-700",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"text-white flex items-center",children:[e.jsx(ae,{className:"w-5 h-5 mr-2"}),"Appearance"]}),e.jsx(z,{className:"text-gray-400",children:"Customize the look and feel of the application"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-gray-300",children:"Theme"}),e.jsxs(V,{value:i.theme,onValueChange:l=>c("theme","theme",l),"aria-label":"Theme",children:[e.jsx(B,{className:"bg-gray-800 border-gray-600 text-white",children:e.jsx(_,{})}),e.jsxs(W,{className:"bg-gray-800 border-gray-600",children:[e.jsx(j,{value:"dark",className:"text-white hover:bg-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(sa,{className:"w-4 h-4 mr-2"}),"Dark"]})}),e.jsx(j,{value:"light",className:"text-white hover:bg-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),"Light"]})}),e.jsx(j,{value:"system",className:"text-white hover:bg-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ra,{className:"w-4 h-4 mr-2"}),"System"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{className:"text-gray-300 flex items-center",children:[e.jsx(ia,{className:"w-4 h-4 mr-2"}),"Language"]}),e.jsxs(V,{value:i.language,onValueChange:l=>c("language","language",l),"aria-label":"Language",children:[e.jsx(B,{className:"bg-gray-800 border-gray-600 text-white",children:e.jsx(_,{})}),e.jsxs(W,{className:"bg-gray-800 border-gray-600",children:[e.jsx(j,{value:"en",className:"text-white hover:bg-gray-700",children:"English"}),e.jsx(j,{value:"es",className:"text-white hover:bg-gray-700",children:"Español"}),e.jsx(j,{value:"fr",className:"text-white hover:bg-gray-700",children:"Français"}),e.jsx(j,{value:"de",className:"text-white hover:bg-gray-700",children:"Deutsch"}),e.jsx(j,{value:"ja",className:"text-white hover:bg-gray-700",children:"日本語"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-gray-300",children:"Timezone"}),e.jsxs(V,{value:i.timezone,onValueChange:l=>c("timezone","timezone",l),"aria-label":"Timezone",children:[e.jsx(B,{className:"bg-gray-800 border-gray-600 text-white",children:e.jsx(_,{})}),e.jsxs(W,{className:"bg-gray-800 border-gray-600",children:[e.jsx(j,{value:"UTC-8",className:"text-white hover:bg-gray-700",children:"Pacific Time (UTC-8)"}),e.jsx(j,{value:"UTC-5",className:"text-white hover:bg-gray-700",children:"Eastern Time (UTC-5)"}),e.jsx(j,{value:"UTC+0",className:"text-white hover:bg-gray-700",children:"Greenwich Mean Time (UTC+0)"}),e.jsx(j,{value:"UTC+1",className:"text-white hover:bg-gray-700",children:"Central European Time (UTC+1)"}),e.jsx(j,{value:"UTC+9",className:"text-white hover:bg-gray-700",children:"Japan Standard Time (UTC+9)"})]})]})]})]})]}),e.jsxs(f,{className:"bg-gray-900 border-gray-700",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"text-white flex items-center",children:[e.jsx(na,{className:"w-5 h-5 mr-2"}),"Annotation Settings"]}),e.jsx(z,{className:"text-gray-400",children:"Configure your annotation tools and behavior"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-gray-300",children:"Default Tool"}),e.jsxs(V,{value:(p=i.annotation)==null?void 0:p.defaultTool,onValueChange:l=>c("annotation","defaultTool",l),"aria-label":"Default Tool",children:[e.jsx(B,{className:"bg-gray-800 border-gray-600 text-white",children:e.jsx(_,{})}),e.jsxs(W,{className:"bg-gray-800 border-gray-600",children:[e.jsx(j,{value:"highlight",className:"text-white hover:bg-gray-700",children:"Highlight"}),e.jsx(j,{value:"comment",className:"text-white hover:bg-gray-700",children:"Comment"}),e.jsx(j,{value:"shape",className:"text-white hover:bg-gray-700",children:"Shape"}),e.jsx(j,{value:"freehand",className:"text-white hover:bg-gray-700",children:"Freehand"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-gray-300",children:"Default Color"}),e.jsx("div",{className:"flex space-x-2",children:["#fbbf24","#ef4444","#10b981","#3b82f6","#8b5cf6","#f59e0b"].map((l,q)=>{var K;return e.jsx("button",{type:"button",className:`color-picker-button ${((K=i.annotation)==null?void 0:K.defaultColor)===l?"border-white":"border-gray-600"}`,"data-color":l,onClick:()=>c("annotation","defaultColor",l),"aria-label":`Select color ${q+1}`,title:`Color option ${q+1}: ${l}`},l)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{className:"text-gray-300",children:["Stroke Width: ",(C=i.annotation)==null?void 0:C.strokeWidth,"px"]}),e.jsx(me,{value:[((D=i.annotation)==null?void 0:D.strokeWidth)||2],onValueChange:([l])=>c("annotation","strokeWidth",l),max:10,min:1,step:1,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(b,{className:"text-gray-300",children:["Font Size: ",(L=i.annotation)==null?void 0:L.fontSize,"px"]}),e.jsx(me,{value:[((u=i.annotation)==null?void 0:u.fontSize)||14],onValueChange:([l])=>c("annotation","fontSize",l),max:24,min:10,step:1,className:"w-full"})]}),e.jsx(fa,{className:"bg-gray-700"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-gray-300",children:"Auto Save"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Automatically save annotations"})]}),e.jsx(S,{checked:(d=i.annotation)==null?void 0:d.autoSave,onCheckedChange:l=>c("annotation","autoSave",l)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-gray-300",children:"Show Other Annotations"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Display annotations from other users"})]}),e.jsx(S,{checked:(g=i.annotation)==null?void 0:g.showOtherAnnotations,onCheckedChange:l=>c("annotation","showOtherAnnotations",l)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-gray-300",children:"Real-time Sync"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Sync annotations in real-time"})]}),e.jsx(S,{checked:(k=i.annotation)==null?void 0:k.realTimeSync,onCheckedChange:l=>c("annotation","realTimeSync",l)})]})]})]})]}),e.jsxs(f,{className:"bg-gray-900 border-gray-700",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"text-white flex items-center",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Collaboration"]}),e.jsx(z,{className:"text-gray-400",children:"Control how you interact with other users"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-gray-300",children:"Show Presence"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Show your cursor to other users"})]}),e.jsx(S,{checked:(Y=i.collaboration)==null?void 0:Y.showPresence,onCheckedChange:l=>c("collaboration","showPresence",l)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-gray-300",children:"Allow Voice Calls"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Enable voice calling features"})]}),e.jsx(S,{checked:(Z=i.collaboration)==null?void 0:Z.allowVoiceCalls,onCheckedChange:l=>c("collaboration","allowVoiceCalls",l)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-gray-300",children:"Allow Screen Share"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Enable screen sharing capabilities"})]}),e.jsx(S,{checked:(J=i.collaboration)==null?void 0:J.allowScreenShare,onCheckedChange:l=>c("collaboration","allowScreenShare",l)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-gray-300",children:"Show Typing Indicators"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Show when others are typing"})]}),e.jsx(S,{checked:(xe=i.collaboration)==null?void 0:xe.showTypingIndicators,onCheckedChange:l=>c("collaboration","showTypingIndicators",l)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-gray-300",children:"Auto-join Team Calls"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Automatically join team calls when invited"})]}),e.jsx(S,{checked:(ge=i.collaboration)==null?void 0:ge.autoJoinTeamCalls,onCheckedChange:l=>c("collaboration","autoJoinTeamCalls",l)})]})]})]}),e.jsxs(f,{className:"bg-gray-900 border-gray-700",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"text-white flex items-center",children:[e.jsx(la,{className:"w-5 h-5 mr-2"}),"Accessibility"]}),e.jsx(z,{className:"text-gray-400",children:"Customize accessibility features"})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-gray-300",children:"Font Size"}),e.jsxs(V,{value:(ue=i.accessibility)==null?void 0:ue.fontSize,onValueChange:l=>c("accessibility","fontSize",l),"aria-label":"Font Size",children:[e.jsx(B,{className:"bg-gray-800 border-gray-600 text-white",children:e.jsx(_,{})}),e.jsxs(W,{className:"bg-gray-800 border-gray-600",children:[e.jsx(j,{value:"small",className:"text-white hover:bg-gray-700",children:"Small"}),e.jsx(j,{value:"medium",className:"text-white hover:bg-gray-700",children:"Medium"}),e.jsx(j,{value:"large",className:"text-white hover:bg-gray-700",children:"Large"}),e.jsx(j,{value:"extra-large",className:"text-white hover:bg-gray-700",children:"Extra Large"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-gray-300",children:"High Contrast"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Increase contrast for better visibility"})]}),e.jsx(S,{checked:(ye=i.accessibility)==null?void 0:ye.highContrast,onCheckedChange:l=>c("accessibility","highContrast",l)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-gray-300",children:"Reduced Motion"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Minimize animations and transitions"})]}),e.jsx(S,{checked:(pe=i.accessibility)==null?void 0:pe.reducedMotion,onCheckedChange:l=>c("accessibility","reducedMotion",l)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(b,{className:"text-gray-300",children:"Keyboard Navigation"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Enhanced keyboard navigation support"})]}),e.jsx(S,{checked:(je=i.accessibility)==null?void 0:je.keyboardNavigation,onCheckedChange:l=>c("accessibility","keyboardNavigation",l)})]})]})]})]})}const Ea=({user:a})=>{const{updateUserPreferences:t,isLoading:r}=U();if(!a)return e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"User information not available"})});const s=async(o,c)=>{const y=a.preferences||{},n=y.notifications||{},p={...y,notifications:{...n,[o]:c}};await t(a.id,p)},i=[{key:"email",label:"Email notifications",description:"Receive notifications via email",icon:le},{key:"push",label:"Push notifications",description:"Receive push notifications on mobile devices",icon:ca},{key:"desktop",label:"Desktop notifications",description:"Show desktop notifications when using the web app",icon:oa}],h=[{key:"mentions",label:"Mentions",description:"When someone @mentions you in comments or chats",icon:da},{key:"documentUpdates",label:"Document updates",description:"When documents you're watching are modified",icon:ma},{key:"teamMessages",label:"Team messages",description:"New messages in team channels you belong to",icon:ha},{key:"voiceCalls",label:"Voice calls",description:"Incoming voice and video calls",icon:ce}],m=o=>e.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:o.map(c=>{var p,C;const y=c.icon,n=((C=(p=a.preferences)==null?void 0:p.notifications)==null?void 0:C[c.key])??!1;return e.jsxs("li",{className:"flex items-center justify-between py-4 px-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(y,{className:"h-6 w-6 text-gray-500 dark:text-gray-400","aria-hidden":"true"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:c.label}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.description})]})]}),e.jsx(S,{id:`toggle-${c.key}`,checked:n,onCheckedChange:D=>s(c.key,D),disabled:r,"aria-label":`Toggle ${c.label}`})]},c.key)})});return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900 dark:text-white mb-4",children:"By Channel"}),e.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/50 shadow-sm",children:m(i)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold leading-6 text-gray-900 dark:text-white mb-4",children:"By Type"}),e.jsx("div",{className:"overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/50 shadow-sm",children:m(h)})]})]})},Oa=[{id:"profile",label:"Profile",icon:he},{id:"preferences",label:"Preferences",icon:ze},{id:"notifications",label:"Notifications",icon:xa},{id:"annotation",label:"Annotation",icon:ae},{id:"privacy",label:"Privacy",icon:se},{id:"activity",label:"Activity",icon:oe}],Fa=a=>({"#fbbf24":"color-amber","#ef4444":"color-red","#10b981":"color-emerald","#3b82f6":"color-blue","#8b5cf6":"color-violet","#f59e0b":"color-orange"})[a]||"",Ia=({user:a})=>{var y;const{updateUserPreferences:t,isLoading:r}=U(),[s,i]=x.useState(((y=a.preferences)==null?void 0:y.annotation)||{defaultTool:"highlight",defaultColor:"#fbbf24",strokeWidth:2,fontSize:14,autoSave:!0,showOtherAnnotations:!0,realTimeSync:!0,highlightOpacity:.3}),[h,m]=x.useState(!1),o=(n,p)=>{i(C=>({...C,[n]:p})),m(!0)},c=async()=>{try{await t(a.id,{annotation:s}),m(!1),w({title:"Annotation settings saved",description:"Your annotation preferences have been updated"})}catch(n){w({title:"Save failed",description:n instanceof Error?n.message:"Failed to save annotation settings",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[h&&e.jsx(f,{className:"bg-blue-900/20 border-blue-700",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-blue-300",children:"You have unsaved changes"}),e.jsx(N,{size:"sm",onClick:c,disabled:r,className:"bg-blue-600 hover:bg-blue-700",children:r?"Saving...":"Save Changes"})]})})}),e.jsxs(f,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"text-white flex items-center",children:[e.jsx(ae,{className:"w-5 h-5 mr-2"}),"Annotation Preferences"]}),e.jsx(z,{className:"text-gray-400",children:"Configure your default annotation tools and behavior"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Default Tool"}),e.jsxs("select",{value:s.defaultTool,onChange:n=>o("defaultTool",n.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2","aria-label":"Default annotation tool",children:[e.jsx("option",{value:"highlight",children:"Highlight"}),e.jsx("option",{value:"comment",children:"Comment"}),e.jsx("option",{value:"shape",children:"Shape"}),e.jsx("option",{value:"freehand",children:"Freehand"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Default Color"}),e.jsx("div",{className:"flex space-x-2",children:["#fbbf24","#ef4444","#10b981","#3b82f6","#8b5cf6","#f59e0b"].map(n=>e.jsx("button",{type:"button",className:`w-8 h-8 rounded-full border-2 color-picker-button ${Fa(n)} ${s.defaultColor===n?"border-white":"border-gray-600"}`,onClick:()=>o("defaultColor",n),"aria-label":`Select color ${n}`},n))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-300",children:["Stroke Width: ",s.strokeWidth,"px"]}),e.jsx("input",{type:"range",min:"1",max:"10",value:s.strokeWidth,onChange:n=>o("strokeWidth",parseInt(n.target.value)),className:"w-full","aria-label":`Stroke width: ${s.strokeWidth} pixels`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-300",children:["Font Size: ",s.fontSize,"px"]}),e.jsx("input",{type:"range",min:"10",max:"24",value:s.fontSize,onChange:n=>o("fontSize",parseInt(n.target.value)),className:"w-full","aria-label":`Font size: ${s.fontSize} pixels`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-300",children:["Highlight Opacity: ",Math.round(s.highlightOpacity*100),"%"]}),e.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:s.highlightOpacity,onChange:n=>o("highlightOpacity",parseFloat(n.target.value)),className:"w-full","aria-label":`Highlight opacity: ${Math.round(s.highlightOpacity*100)} percent`})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Auto Save"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Automatically save annotations as you create them"})]}),e.jsx("input",{type:"checkbox",checked:s.autoSave,onChange:n=>o("autoSave",n.target.checked),className:"w-4 h-4","aria-label":"Auto Save - Automatically save annotations as you create them"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Show Other Annotations"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Display annotations from other users"})]}),e.jsx("input",{type:"checkbox",checked:s.showOtherAnnotations,onChange:n=>o("showOtherAnnotations",n.target.checked),className:"w-4 h-4","aria-label":"Show Other Annotations - Display annotations from other users"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Real-time Sync"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Sync annotations in real-time with other users"})]}),e.jsx("input",{type:"checkbox",checked:s.realTimeSync,onChange:n=>o("realTimeSync",n.target.checked),className:"w-4 h-4","aria-label":"Real-time Sync - Sync annotations in real-time with other users"})]})]})]})]})]})},Ua=({user:a})=>{var y;const{updateUserPreferences:t,isLoading:r}=U(),[s,i]=x.useState(((y=a.preferences)==null?void 0:y.privacy)||{profileVisibility:"team",showOnlineStatus:!0,allowContactByEmail:!0,dataProcessingConsent:!0,analyticsOptOut:!1,shareUsageData:!0}),[h,m]=x.useState(!1),o=(n,p)=>{i(C=>({...C,[n]:p})),m(!0)},c=async()=>{try{await t(a.id,{privacy:s}),m(!1),w({title:"Privacy settings saved",description:"Your privacy preferences have been updated"})}catch(n){w({title:"Save failed",description:n instanceof Error?n.message:"Failed to save privacy settings",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[h&&e.jsx(f,{className:"bg-blue-900/20 border-blue-700",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-blue-300",children:"You have unsaved changes"}),e.jsx(N,{size:"sm",onClick:c,disabled:r,className:"bg-blue-600 hover:bg-blue-700",children:r?"Saving...":"Save Changes"})]})})}),e.jsxs(f,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"text-white flex items-center",children:[e.jsx(se,{className:"w-5 h-5 mr-2"}),"Privacy & Visibility"]}),e.jsx(z,{className:"text-gray-400",children:"Control who can see your information and how your data is used"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Profile Visibility"}),e.jsxs("select",{value:s.profileVisibility,onChange:n=>o("profileVisibility",n.target.value),className:"w-full bg-gray-700 border border-gray-600 text-white rounded-lg px-3 py-2","aria-label":"Profile visibility setting",children:[e.jsx("option",{value:"public",children:"Public - Anyone can see your profile"}),e.jsx("option",{value:"team",children:"Team Only - Only team members can see your profile"}),e.jsx("option",{value:"private",children:"Private - Only you can see your profile"})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Show Online Status"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Let others see when you're online"})]}),e.jsx("input",{type:"checkbox",checked:s.showOnlineStatus,onChange:n=>o("showOnlineStatus",n.target.checked),className:"w-4 h-4","aria-label":"Show Online Status - Let others see when you're online"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Allow Contact by Email"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Allow team members to contact you via email"})]}),e.jsx("input",{type:"checkbox",checked:s.allowContactByEmail,onChange:n=>o("allowContactByEmail",n.target.checked),className:"w-4 h-4","aria-label":"Allow Contact by Email - Allow team members to contact you via email"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Data Processing Consent"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Allow processing of your data for service improvement"})]}),e.jsx("input",{type:"checkbox",checked:s.dataProcessingConsent,onChange:n=>o("dataProcessingConsent",n.target.checked),className:"w-4 h-4","aria-label":"Data Processing Consent - Allow processing of your data for service improvement"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Analytics Opt-out"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Opt out of analytics data collection"})]}),e.jsx("input",{type:"checkbox",checked:s.analyticsOptOut,onChange:n=>o("analyticsOptOut",n.target.checked),className:"w-4 h-4","aria-label":"Analytics Opt-out - Opt out of analytics data collection"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Share Usage Data"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Help improve the app by sharing anonymous usage data"})]}),e.jsx("input",{type:"checkbox",checked:s.shareUsageData,onChange:n=>o("shareUsageData",n.target.checked),className:"w-4 h-4","aria-label":"Share Usage Data - Help improve the app by sharing anonymous usage data"})]})]})]})]})]})},La=({user:a})=>{const t=[{id:"1",type:"login",description:"Signed in to the application",timestamp:new Date(Date.now()-72e5).toISOString(),icon:he,color:"text-green-500"},{id:"2",type:"annotation",description:'Added annotation to "Project Proposal.pdf"',timestamp:new Date(Date.now()-144e5).toISOString(),icon:ae,color:"text-blue-500"},{id:"3",type:"profile",description:"Updated profile information",timestamp:new Date(Date.now()-864e5).toISOString(),icon:ze,color:"text-purple-500"},{id:"4",type:"team",description:'Joined "Product Development" team',timestamp:new Date(Date.now()-2592e5).toISOString(),icon:H,color:"text-orange-500"},{id:"5",type:"security",description:"Enabled two-factor authentication",timestamp:new Date(Date.now()-6048e5).toISOString(),icon:se,color:"text-red-500"}],r=s=>{const i=new Date(s),m=Math.floor((new Date().getTime()-i.getTime())/(1e3*60*60));if(m<1)return"Just now";if(m<24)return`${m} hour${m>1?"s":""} ago`;{const o=Math.floor(m/24);return`${o} day${o>1?"s":""} ago`}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(f,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"text-white flex items-center",children:[e.jsx(oe,{className:"w-5 h-5 mr-2"}),"Recent Activity"]}),e.jsx(z,{className:"text-gray-400",children:"Your recent actions and account activity"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"space-y-4",children:t.map(s=>{const i=s.icon;return e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-700 rounded-lg hover:bg-gray-650 transition-colors",children:[e.jsx("div",{className:`p-2 rounded-full bg-gray-600 ${s.color}`,children:e.jsx(i,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium",children:s.description}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:r(s.timestamp)})]}),e.jsx(de,{variant:"outline",className:"border-gray-600 text-gray-300 capitalize",children:s.type})]},s.id)})}),t.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(oe,{className:"w-12 h-12 mx-auto mb-4 text-gray-500"}),e.jsx("p",{className:"text-gray-400",children:"No recent activity"})]})]})]}),e.jsxs(f,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(T,{children:[e.jsx(A,{className:"text-white",children:"Activity Statistics"}),e.jsx(z,{className:"text-gray-400",children:"Overview of your account activity"})]}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"24"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Annotations"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"12"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Documents"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"3"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Teams"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"48h"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Active Time"})]})]})})]})]})},Ma=({user:a})=>e.jsx("div",{className:"bg-gray-900 rounded-xl overflow-hidden border border-gray-700",children:e.jsxs(pa,{defaultValue:"profile",className:"w-full",children:[e.jsx(ja,{className:"grid w-full grid-cols-6 bg-gray-800 border-b border-gray-700 rounded-none h-auto p-0",children:Oa.map(t=>{const r=t.icon;return e.jsxs(ba,{value:t.id,className:"flex items-center px-4 py-4 whitespace-nowrap border-b-2 border-transparent transition-colors data-[state=active]:border-blue-500 data-[state=active]:text-blue-400 data-[state=active]:bg-gray-750 text-gray-400 hover:text-gray-300 hover:bg-gray-750 rounded-none",children:[e.jsx(r,{className:"w-4 h-4 mr-2"}),t.label]},t.id)})}),e.jsx(R,{value:"profile",className:"p-6 mt-0",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ra,{user:a}),e.jsx($a,{user:a})]})}),e.jsx(R,{value:"preferences",className:"p-6 mt-0",children:e.jsx(Pa,{userId:a.id,preferences:a.preferences})}),e.jsx(R,{value:"notifications",className:"p-6 mt-0",children:e.jsx(Ea,{user:a})}),e.jsx(R,{value:"annotation",className:"p-6 mt-0",children:e.jsx(Ia,{user:a})}),e.jsx(R,{value:"privacy",className:"p-6 mt-0",children:e.jsx(Ua,{user:a})}),e.jsx(R,{value:"activity",className:"p-6 mt-0",children:e.jsx(La,{user:a})})]})});function Ra({user:a}){const t=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not specified";return e.jsxs(f,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"text-white flex items-center",children:[e.jsx(he,{className:"w-5 h-5 mr-2"}),"Profile Details"]}),e.jsx(z,{className:"text-gray-400",children:"Personal information and contact details"})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Full Name"}),e.jsx("p",{className:"text-white bg-gray-700 px-3 py-2 rounded-lg",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Email"}),e.jsx("p",{className:"text-white bg-gray-700 px-3 py-2 rounded-lg",children:a.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Phone"}),e.jsx("p",{className:"text-white bg-gray-700 px-3 py-2 rounded-lg",children:a.phone||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Department"}),e.jsx("p",{className:"text-white bg-gray-700 px-3 py-2 rounded-lg",children:a.department||"Not specified"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Timezone"}),e.jsx("p",{className:"text-white bg-gray-700 px-3 py-2 rounded-lg",children:a.timezone||"Not specified"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Member Since"}),e.jsx("p",{className:"text-white bg-gray-700 px-3 py-2 rounded-lg",children:t(a.joinDate)})]})]}),a.bio&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Bio"}),e.jsx("div",{className:"text-white bg-gray-700 px-3 py-2 rounded-lg leading-relaxed",children:a.bio})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Current Status"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${a.status==="online"?"bg-green-500":a.status==="away"?"bg-yellow-500":a.status==="busy"?"bg-red-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-white capitalize",children:a.status})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Last Active"}),e.jsx("p",{className:"text-white",children:t(a.lastLoginAt)})]})]})]})]})}function $a({user:a}){const t=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not specified";return!a.teamAffiliations||a.teamAffiliations.length===0?e.jsxs(f,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"text-white flex items-center",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Team Affiliations"]}),e.jsx(z,{className:"text-gray-400",children:"Teams and roles you're part of"})]}),e.jsx(v,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(H,{className:"w-12 h-12 mx-auto mb-4 text-gray-500"}),e.jsx("p",{className:"text-gray-400",children:"No team affiliations found"})]})})]}):e.jsxs(f,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(T,{children:[e.jsxs(A,{className:"text-white flex items-center",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Team Affiliations"]}),e.jsx(z,{className:"text-gray-400",children:"Teams and roles you're part of"})]}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:a.teamAffiliations.map(r=>e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4 hover:bg-gray-650 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-white text-lg",children:r.teamName}),e.jsx(de,{variant:"outline",className:"border-blue-500 text-blue-400 bg-blue-500/10",children:r.role})]}),e.jsxs("p",{className:"text-sm text-gray-400 mb-4 flex items-center",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Joined ",t(r.joinedAt)]}),r.permissions&&r.permissions.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:"Permissions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.permissions.map(s=>e.jsx(de,{variant:s.enabled?"default":"secondary",className:`text-xs ${s.enabled?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-600 hover:bg-gray-700 text-gray-300"}`,title:s.description,children:s.name},s.id))})]})]},r.teamId))})})]})}function rs({userId:a,isOwnProfile:t=!0,defaultTab:r="profile"}){const{currentUser:s,isLoading:i,error:h,fetchUser:m}=U(),{isAuthenticated:o}=Ve(),[c,y]=x.useState(!1);return x.useEffect(()=>{a&&a!==(s==null?void 0:s.id)&&m(a)},[a,s==null?void 0:s.id,m]),o?i?e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx(Pe,{className:"h-8 w-8 animate-spin text-blue-600"})}):h?e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-400 mb-4",children:h}),e.jsx(N,{onClick:()=>m(a||(s==null?void 0:s.id)||""),children:"Try Again"})]})}):s?e.jsxs("div",{className:"min-h-screen bg-gray-900",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx(Va,{user:s,isOwnProfile:t,onEditProfile:()=>y(!0)}),e.jsx(Ma,{user:s})]}),c&&e.jsx(Da,{user:s,onClose:()=>y(!1),onSave:()=>y(!1)})]}):e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-400",children:"User not found"})}):e.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(se,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-400",children:"Please log in to view profile"})]})})}function Va({user:a,isOwnProfile:t,onEditProfile:r}){const{updateUserProfile:s,uploadAvatar:i,isLoading:h}=U(),[m,o]=x.useState(!1),[c,y]=x.useState(a.bio||""),n=x.useRef(null),p=u=>{switch(u){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"busy":return"bg-red-500";default:return"bg-gray-500"}},C=async u=>{var g;const d=(g=u.target.files)==null?void 0:g[0];if(d)try{const k=await i(d);await s(a.id,{avatar:k}),w({title:"Avatar updated",description:"Your profile picture has been updated successfully"})}catch(k){w({title:"Upload failed",description:k instanceof Error?k.message:"Failed to upload avatar",variant:"destructive"})}},D=async()=>{try{await s(a.id,{bio:c}),o(!1),w({title:"Bio updated",description:"Your bio has been updated successfully"})}catch(u){w({title:"Update failed",description:u instanceof Error?u.message:"Failed to update bio",variant:"destructive"})}},L=u=>u?new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not specified";return e.jsx(f,{className:"bg-gray-800 border-gray-700 mb-8",children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-700",children:e.jsxs(Ce,{className:"w-full h-full",children:[e.jsx(Se,{src:a.avatar,alt:a.name,className:"w-full h-full object-cover"}),e.jsx(ke,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-2xl w-full h-full",children:a.name.charAt(0)})]})}),t&&e.jsx("button",{type:"button",onClick:()=>{var u;return(u=n.current)==null?void 0:u.click()},disabled:h,className:"absolute bottom-2 right-2 bg-blue-600 hover:bg-blue-700 rounded-full p-2 text-white transition-colors disabled:opacity-50","aria-label":"Upload new avatar",children:e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-2 border-gray-800 ${p(a.status)}`}),e.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:C,className:"hidden","aria-label":"Avatar upload input"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:a.name}),e.jsx("p",{className:"text-gray-300 text-lg",children:a.role}),a.department&&e.jsx("p",{className:"text-gray-400",children:a.department})]}),e.jsx("div",{className:"flex gap-2 mt-4 sm:mt-0",children:t?e.jsxs(N,{variant:"outline",size:"sm",onClick:r,className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[e.jsx(ga,{className:"w-4 h-4 mr-2"}),"Edit Profile"]}):e.jsxs(e.Fragment,{children:[e.jsxs(N,{variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Message"]}),e.jsxs(N,{variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Call"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx(le,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("a",{href:`mailto:${a.email}`,className:"hover:text-blue-400 transition-colors",children:a.email})]}),a.phone&&e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx(ce,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("a",{href:`tel:${a.phone}`,className:"hover:text-blue-400 transition-colors",children:a.phone})]}),a.timezone&&e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx(ua,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{children:a.timezone})]}),a.joinDate&&e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx(De,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsxs("span",{children:["Joined ",L(a.joinDate)]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-white font-medium",children:"About"}),t&&e.jsx("button",{type:"button",onClick:()=>o(!m),className:"text-gray-400 hover:text-white transition-colors","aria-label":"Edit bio",children:e.jsx(ya,{className:"w-4 h-4"})})]}),m?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Te,{value:c,onChange:u=>y(u.target.value),className:"bg-gray-700 text-white border-gray-600 resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Tell us about yourself...",maxLength:500}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{onClick:D,size:"sm",disabled:h,children:[h?e.jsx(Pe,{className:"w-4 h-4 animate-spin mr-2"}):null,"Save"]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>{y(a.bio||""),o(!1)},className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Cancel"})]})]}):e.jsx("p",{className:"text-gray-300 leading-relaxed",children:a.bio||"No bio available."})]}),a.teamAffiliations&&a.teamAffiliations.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-white font-medium mb-3 flex items-center",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Team Affiliations"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.teamAffiliations.map(u=>e.jsxs("div",{className:"bg-gray-700 px-3 py-1 rounded-full text-sm text-gray-300",children:[u.teamName," - ",u.role]},u.teamId))})]})]})]})})})}export{me as S,rs as U,S as a};

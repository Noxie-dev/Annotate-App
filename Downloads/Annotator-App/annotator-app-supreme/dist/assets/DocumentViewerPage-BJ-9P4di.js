const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatPanel-DQiLZMzA.js","assets/radix-ui-Dm4GcI-M.js","assets/react-vendor-BxpQIQ7B.js","assets/index-CeiQEl0I.js","assets/utils-vendor-DzewcVAv.js","assets/pdf-vendor-BQ5_-Qxz.js","assets/data-vendor-7zrJSdJt.js","assets/index-gvTyY08E.css","assets/webrtc-vendor-B72qc5dU.js","assets/button-BU14-tcR.js","assets/input-B_Pc9ca6.js","assets/avatar-Dqh11rFN.js","assets/badge-CzkljnjK.js","assets/dropdown-menu-EF7jn1zy.js","assets/label--JKAZs82.js","assets/select-BvRLeJVF.js","assets/UserProfile-CR6JMFRa.js","assets/card-BRJUXXhw.js","assets/form-vendor-B0nP1T3w.js","assets/zod-CPQLszjv.js","assets/profile-vendor-CNRlCIDN.js","assets/tabs-C8PfzfW2.js","assets/separator-UVofwG_Y.js","assets/UserProfile-By9EU1W6.css","assets/AIPanel-D_Gu1BpU.js","assets/CommentsPanel-CKZuqiXd.js","assets/ToolsPanel-CTD6PzDw.js","assets/PDFViewer-CgRuMpXH.js","assets/TextLayer-C7U9D9nZ.css"])))=>i.map(i=>d[i]);
import{j as e}from"./radix-ui-Dm4GcI-M.js";import{a as n,k as M,u as E}from"./react-vendor-BxpQIQ7B.js";import{a as V,u as L,b,L as w}from"./index-CeiQEl0I.js";import{_ as g}from"./pdf-vendor-BQ5_-Qxz.js";import{B as l}from"./button-BU14-tcR.js";import{B as m}from"./badge-CzkljnjK.js";import{A as y,a as C,b as P}from"./avatar-Dqh11rFN.js";import{D as I,a as B,b as O,d as U,e as A,c as j}from"./dropdown-menu-EF7jn1zy.js";import{D as F,a as R,b as H,c as q,d as W}from"./select-BvRLeJVF.js";import{U as Z}from"./UserProfile-CR6JMFRa.js";import{w as $,U as J,x as Q,B as Y,S as G,y as K,q as X,Z as k,H as T,I as z,J as ee,V as se,N as D,O as ae,Q as te,j as S,W as _,C as N,A as v}from"./utils-vendor-DzewcVAv.js";import{T as re,a as le,b as u,c as f}from"./tabs-C8PfzfW2.js";import{A as ie,a as ce}from"./alert-B94VLGCJ.js";import"./data-vendor-7zrJSdJt.js";import"./card-BRJUXXhw.js";import"./form-vendor-B0nP1T3w.js";import"./zod-CPQLszjv.js";import"./profile-vendor-CNRlCIDN.js";import"./input-B_Pc9ca6.js";import"./label--JKAZs82.js";import"./separator-UVofwG_Y.js";function ne(){const{currentUser:s}=V(),{logout:t,isAuthenticated:r}=L(),[i,c]=n.useState(!1),[x,d]=n.useState("profile");if(!r||!s)return null;const o=h=>{switch(h){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"busy":return"bg-red-500";default:return"bg-gray-500"}},a=(h="profile")=>{d(h),c(!0)},p=async()=>{try{await t()}catch(h){console.error("Logout failed:",h)}};return e.jsxs(e.Fragment,{children:[e.jsxs(I,{children:[e.jsx(B,{asChild:!0,children:e.jsx(l,{variant:"ghost",className:"relative h-10 w-auto px-2 hover:bg-gray-800",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(y,{className:"h-8 w-8",children:[e.jsx(C,{src:s.avatar,alt:s.name}),e.jsx(P,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-sm",children:s.name.charAt(0)})]}),e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-gray-900 ${o(s.status)}`})]}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate max-w-32",children:s.name}),e.jsx("p",{className:"text-xs text-gray-400 truncate max-w-32",children:s.role})]}),e.jsx($,{className:"h-4 w-4 text-gray-400"})]})})}),e.jsxs(O,{className:"w-64 bg-gray-900 border-gray-700",align:"end",forceMount:!0,children:[e.jsx(U,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(y,{className:"h-10 w-10",children:[e.jsx(C,{src:s.avatar,alt:s.name}),e.jsx(P,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white",children:s.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{variant:"secondary",className:"bg-blue-600 text-white text-xs",children:s.role}),e.jsx(m,{variant:"outline",className:"border-gray-600 text-gray-300 text-xs",children:s.status})]})]})}),e.jsx(A,{className:"bg-gray-700"}),e.jsxs(j,{onClick:()=>a("profile"),className:"text-gray-300 hover:bg-gray-800 hover:text-white cursor-pointer",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"View Profile"})]}),e.jsxs(j,{onClick:()=>a("preferences"),className:"text-gray-300 hover:bg-gray-800 hover:text-white cursor-pointer",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Preferences"})]}),e.jsxs(j,{onClick:()=>a("notifications"),className:"text-gray-300 hover:bg-gray-800 hover:text-white cursor-pointer",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Notifications"})]}),e.jsxs(j,{onClick:()=>a("security"),className:"text-gray-300 hover:bg-gray-800 hover:text-white cursor-pointer",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Security"})]}),e.jsx(A,{className:"bg-gray-700"}),e.jsxs(j,{onClick:p,className:"text-red-400 hover:bg-red-900/20 hover:text-red-300 cursor-pointer",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Sign Out"})]})]})]}),e.jsx(F,{open:i,onOpenChange:c,children:e.jsxs(R,{className:"max-w-6xl max-h-[90vh] bg-gray-900 border-gray-700 p-0",children:[e.jsxs(H,{className:"px-6 py-4 border-b border-gray-700",children:[e.jsx(q,{className:"text-white",children:"User Profile"}),e.jsx(W,{className:"text-gray-400",children:"Manage your profile, preferences, and security settings"})]}),e.jsx("div",{className:"px-6 py-4 overflow-y-auto",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(X,{className:"h-8 w-8 animate-spin text-blue-600"})}),children:e.jsx(Z,{userId:s.id,isOwnProfile:!0,defaultTab:x})})})]})})]})}function oe(){const{currentDocument:s,users:t,currentPage:r,totalPages:i,setCurrentPage:c,sidebarCollapsed:x,setSidebarCollapsed:d}=b(),o=t.filter(a=>a.status==="online");return e.jsx("header",{className:"bg-[#1a1f2e] border-b border-gray-800 px-6 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-200",children:"Annotator-App"}),e.jsx("div",{className:"text-xs text-purple-400 font-medium",children:"Supreme Edition™"})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-6 w-px bg-gray-700"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-medium text-gray-200",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-400",children:[s.fileSize," • ",s.totalPages," pages"]})]}),e.jsx(m,{variant:"secondary",className:"bg-green-900/20 text-green-400 border-green-700",children:"Live"})]})]})]}),s&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>c(Math.max(1,r-1)),disabled:r<=1,className:"text-gray-400 hover:text-gray-200",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-sm text-gray-300 px-3 py-1 bg-[#0f1419] rounded-md border border-gray-700",children:["Page ",r," of ",i]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>c(Math.min(i,r+1)),disabled:r>=i,className:"text-gray-400 hover:text-gray-200",children:e.jsx(z,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex -space-x-2",children:o.slice(0,4).map(a=>e.jsxs(y,{className:"w-8 h-8 border-2 border-[#1a1f2e]",children:[e.jsx(C,{src:a.avatar,alt:a.name}),e.jsx(P,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs",children:a.name.charAt(0)})]},a.id))}),o.length>4&&e.jsxs("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center text-xs text-gray-300",children:["+",o.length-4]})]}),e.jsx("div",{className:"h-6 w-px bg-gray-700"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-gray-200",children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-gray-200",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx(l,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-gray-200",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsxs(l,{variant:"default",size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Share"]})]}),e.jsx("div",{className:"h-6 w-px bg-gray-700"}),e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full animate-pulse"}),children:e.jsx(ne,{})}),e.jsx("div",{className:"h-6 w-px bg-gray-700"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>d(!x),className:"text-gray-400 hover:text-gray-200",children:e.jsx(te,{className:"w-4 h-4"})})]})]})})}const de=n.lazy(()=>g(()=>import("./ChatPanel-DQiLZMzA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])).then(s=>({default:s.ChatPanel}))),xe=n.lazy(()=>g(()=>import("./AIPanel-D_Gu1BpU.js"),__vite__mapDeps([24,1,2,9,4,10,12,21,3,5,6,7])).then(s=>({default:s.AIPanel}))),me=n.lazy(()=>g(()=>import("./CommentsPanel-CKZuqiXd.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,9,11,12,15])).then(s=>({default:s.CommentsPanel}))),he=n.lazy(()=>g(()=>import("./ToolsPanel-CTD6PzDw.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,9,12,22,16,17,11,15,18,19,20,10,14,21,23])).then(s=>({default:s.ToolsPanel})));function je(){const{sidebarCollapsed:s,setSidebarCollapsed:t,activePanel:r,setActivePanel:i,chatMessages:c,annotations:x}=b(),d=c.filter(a=>!a.timestamp).length,o=x.filter(a=>a.type==="text-comment").length;return s?e.jsxs("div",{className:"w-12 bg-[#1a1f2e] border-l border-gray-800 flex flex-col items-center py-4 space-y-3",children:[e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-200 w-8 h-8 p-0",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx("div",{className:"h-px w-8 bg-gray-700"}),e.jsxs(l,{variant:r==="chat"?"default":"ghost",size:"sm",onClick:()=>{i("chat"),t(!1)},className:"w-8 h-8 p-0 relative",children:[e.jsx(D,{className:"w-4 h-4"}),d>0&&e.jsx(m,{className:"absolute -top-1 -right-1 w-4 h-4 p-0 text-xs bg-red-500",children:d})]}),e.jsx(l,{variant:r==="ai"?"default":"ghost",size:"sm",onClick:()=>{i("ai"),t(!1)},className:"w-8 h-8 p-0",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsxs(l,{variant:r==="comments"?"default":"ghost",size:"sm",onClick:()=>{i("comments"),t(!1)},className:"w-8 h-8 p-0 relative",children:[e.jsx(S,{className:"w-4 h-4"}),o>0&&e.jsx(m,{className:"absolute -top-1 -right-1 w-4 h-4 p-0 text-xs bg-blue-500",children:o})]}),e.jsx(l,{variant:r==="tools"?"default":"ghost",size:"sm",onClick:()=>{i("tools"),t(!1)},className:"w-8 h-8 p-0",children:e.jsx(_,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"w-80 bg-[#1a1f2e] border-l border-gray-800 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-200",children:"Collaboration"}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>t(!0),className:"text-gray-400 hover:text-gray-200 w-8 h-8 p-0",children:e.jsx(z,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs(re,{value:r,onValueChange:a=>i(a),className:"h-full flex flex-col",children:[e.jsxs(le,{className:"grid grid-cols-4 bg-[#0f1419] m-2 p-1 rounded-lg",children:[e.jsxs(u,{value:"chat",className:"relative data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"Chat",d>0&&e.jsx(m,{className:"absolute -top-1 -right-1 w-4 h-4 p-0 text-xs bg-red-500",children:d})]}),e.jsxs(u,{value:"ai",className:"data-[state=active]:bg-purple-600 data-[state=active]:text-white",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"AI"]}),e.jsxs(u,{value:"comments",className:"relative data-[state=active]:bg-green-600 data-[state=active]:text-white",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Notes",o>0&&e.jsx(m,{className:"absolute -top-1 -right-1 w-4 h-4 p-0 text-xs bg-blue-500",children:o})]}),e.jsxs(u,{value:"tools",className:"data-[state=active]:bg-orange-600 data-[state=active]:text-white",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"Tools"]})]}),e.jsx(f,{value:"chat",className:"flex-1 overflow-hidden mt-0",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}),children:e.jsx(de,{})})}),e.jsx(f,{value:"ai",className:"flex-1 overflow-hidden mt-0",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})}),children:e.jsx(xe,{})})}),e.jsx(f,{value:"comments",className:"flex-1 overflow-hidden mt-0",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"w-6 h-6 border-2 border-green-500 border-t-transparent rounded-full animate-spin"})}),children:e.jsx(me,{})})}),e.jsx(f,{value:"tools",className:"flex-1 overflow-hidden mt-0",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"})}),children:e.jsx(he,{})})})]})})]})}const ge=n.lazy(()=>g(()=>import("./PDFViewer-CgRuMpXH.js"),__vite__mapDeps([27,1,2,5,4,3,6,7,9,10,28])).then(s=>({default:s.PDFViewer})));function ue(){const{isLoading:s,currentDocument:t,sidebarCollapsed:r}=b();return s?e.jsx(w,{}):e.jsx("div",{className:"flex h-screen overflow-hidden bg-[#0f1419]",children:e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(oe,{}),e.jsxs("div",{className:"flex-1 flex",children:[e.jsx("div",{className:"flex-1 bg-[#0f1419] relative",children:t?e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading PDF viewer..."})]})}),children:e.jsx(ge,{})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-[#1a1f2e] rounded-full flex items-center justify-center mb-4 mx-auto",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No Document Selected"}),e.jsx("p",{className:"text-gray-400",children:"Select a document to start collaborating"})]})})}),e.jsx(je,{})]})]})})}function Be(){const{documentId:s}=M(),t=E(),{isAuthenticated:r,user:i}=L(),{currentDocument:c,isLoading:x,error:d,loadDocument:o,clearError:a}=b();n.useEffect(()=>{if(!r){t("/auth/login",{state:{redirect:`/document/${s}`},replace:!0});return}s&&s!==(c==null?void 0:c.id)&&o(s)},[s,r,c==null?void 0:c.id,o,t]);const p=i==null?void 0:i.permissions.includes("view_documents");return r?p?x?e.jsx(w,{}):d?e.jsx("div",{className:"min-h-screen bg-[#0f1419] flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsxs(ie,{className:"bg-red-900/20 border-red-800 mb-6",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx(ce,{className:"text-red-300",children:d})]}),e.jsxs("div",{className:"space-x-4",children:[e.jsx(l,{onClick:()=>{a(),s&&o(s)},variant:"outline",className:"bg-[#1a1f2e] border-gray-600 text-gray-300 hover:bg-gray-800",children:"Try Again"}),e.jsxs(l,{onClick:()=>t("/dashboard"),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})]})]})}):c?e.jsx(ue,{}):e.jsx("div",{className:"min-h-screen bg-[#0f1419] flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(N,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Document Not Found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"The document you're looking for doesn't exist or has been removed."}),e.jsxs(l,{onClick:()=>t("/dashboard"),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})]})}):e.jsx("div",{className:"min-h-screen bg-[#0f1419] flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(N,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"You don't have permission to view this document."}),e.jsxs(l,{onClick:()=>t("/dashboard"),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})]})}):e.jsx(w,{})}export{Be as default};

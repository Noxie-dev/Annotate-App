import{j as e}from"./radix-ui-Dm4GcI-M.js";import{u as v,i as C,a as n}from"./react-vendor-BxpQIQ7B.js";import{a as A}from"./index-CeiQEl0I.js";import{s as x}from"./social-auth-B1se39b7.js";import{C as h,d as f}from"./card-BRJUXXhw.js";import{B as k}from"./button-BU14-tcR.js";import{A as S,a as O}from"./alert-B94VLGCJ.js";import{R,d as P,C as g}from"./utils-vendor-DzewcVAv.js";import"./pdf-vendor-BQ5_-Qxz.js";import"./data-vendor-7zrJSdJt.js";function q(){const o=v(),[a]=C(),{setAuthUser:p,setCurrentUser:j}=A(),[d,r]=n.useState("loading"),[b,c]=n.useState(null),l=a.get("code"),i=a.get("state"),t=a.get("provider"),m=a.get("error");n.useEffect(()=>{if(m){r("error"),c("OAuth authentication was cancelled or failed");return}if(!l||!i||!t){r("error"),c("Invalid OAuth callback parameters");return}N()},[l,i,t,m]);const N=async()=>{try{r("loading"),c(null);let s;const u=x.getMockOAuthResult();u?s=u:s=await x.handleOAuthCallback(l,i,t),p(s.user),j(s.profile),r("success"),setTimeout(()=>{const w=sessionStorage.getItem("oauth_redirect")||"/dashboard";sessionStorage.removeItem("oauth_redirect"),o(w,{replace:!0})},2e3)}catch(s){console.error("OAuth callback error:",s),r("error"),c(s.message||"Failed to complete authentication")}},y=()=>{o("/auth/login",{replace:!0})};return d==="loading"?e.jsx("div",{className:"min-h-screen bg-[#0f1419] flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md space-y-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(R,{className:"w-8 h-8 text-white animate-spin"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-200",children:"Completing sign in"}),e.jsxs("p",{className:"text-gray-400 mt-2",children:["Please wait while we complete your ",t," authentication..."]})]})})}):d==="success"?e.jsx("div",{className:"min-h-screen bg-[#0f1419] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(P,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-200",children:"Sign in successful!"}),e.jsxs("p",{className:"text-gray-400 mt-2",children:["You've been successfully signed in with ",t]})]}),e.jsx(h,{className:"bg-[#1a1f2e] border-gray-700",children:e.jsxs(f,{className:"p-6 text-center space-y-4",children:[e.jsx("p",{className:"text-gray-300",children:"Redirecting you to your dashboard..."}),e.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"})]})})]})}):e.jsx("div",{className:"min-h-screen bg-[#0f1419] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(g,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-200",children:"Authentication failed"}),e.jsxs("p",{className:"text-gray-400 mt-2",children:["There was a problem completing your ",t," sign in"]})]}),e.jsx(h,{className:"bg-[#1a1f2e] border-gray-700",children:e.jsxs(f,{className:"p-6 space-y-4",children:[e.jsxs(S,{className:"bg-red-900/20 border-red-800",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx(O,{className:"text-red-300",children:b})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-400 text-center",children:"You can try signing in again or use a different method."}),e.jsx(k,{onClick:y,className:"w-full bg-blue-600 hover:bg-blue-700",children:"Try again"})]})]})})]})})}export{q as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginPage-YZ6VqEmc.js","assets/radix-ui-Dm4GcI-M.js","assets/react-vendor-BxpQIQ7B.js","assets/form-vendor-B0nP1T3w.js","assets/zod-CPQLszjv.js","assets/social-auth-B1se39b7.js","assets/button-BU14-tcR.js","assets/utils-vendor-DzewcVAv.js","assets/input-B_Pc9ca6.js","assets/label--JKAZs82.js","assets/card-BRJUXXhw.js","assets/checkbox-MBTr-Qp8.js","assets/alert-B94VLGCJ.js","assets/separator-UVofwG_Y.js","assets/pdf-vendor-BQ5_-Qxz.js","assets/data-vendor-7zrJSdJt.js","assets/RegisterPage-CGwfG64r.js","assets/ForgotPasswordPage-DVtGYe4V.js","assets/ResetPasswordPage-B71arW9n.js","assets/VerifyEmailPage-CDvhpsMR.js","assets/MFASetupPage-B44BdP3S.js","assets/mfa-service-BYrLSgLl.js","assets/MFAVerifyPage-CEQ3PeYa.js","assets/tabs-C8PfzfW2.js","assets/OAuthCallbackPage-CPJKxmF0.js","assets/DashboardPage-BffF6OEb.js","assets/select-BvRLeJVF.js","assets/badge-CzkljnjK.js","assets/avatar-Dqh11rFN.js","assets/dropdown-menu-EF7jn1zy.js","assets/DocLibraryPage-DFnBC9Em.js","assets/DocumentViewerPage-BJ-9P4di.js","assets/UserProfile-CR6JMFRa.js","assets/profile-vendor-CNRlCIDN.js","assets/UserProfile-By9EU1W6.css","assets/ProfilePage-BpcJW9Ic.js","assets/SettingsPage-CMpotkn7.js","assets/PDFTestViewer-BDYdw0iv.js","assets/TextLayer-C7U9D9nZ.css"])))=>i.map(i=>d[i]);
var N=Object.defineProperty;var $=(t,a,e)=>a in t?N(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e;var L=(t,a,e)=>$(t,typeof a!="symbol"?a+"":a,e);import{j as o}from"./radix-ui-Dm4GcI-M.js";import{e as q,c as V,a as m,f as B,h as g,N as P,B as H}from"./react-vendor-BxpQIQ7B.js";import{z as J,$ as Z,Z as W}from"./utils-vendor-DzewcVAv.js";import{_ as v}from"./pdf-vendor-BQ5_-Qxz.js";import{c as O}from"./data-vendor-7zrJSdJt.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();var _={},F;function G(){if(F)return _;F=1;var t=q();return _.createRoot=t.createRoot,_.hydrateRoot=t.hydrateRoot,_}var K=G();const Y=t=>t instanceof Error?t.message+`
`+t.stack:JSON.stringify(t,null,2);class Q extends V.Component{constructor(a){super(a),this.state={hasError:!1,error:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}render(){return this.state.hasError?o.jsxs("div",{className:"p-4 border border-red-500 rounded",children:[o.jsx("h2",{className:"text-red-500",children:"Something went wrong."}),o.jsx("pre",{className:"mt-2 text-sm",children:Y(this.state.error)})]}):this.props.children}}const X={theme:"system",setTheme:()=>null},ee=m.createContext(X);function te({children:t,defaultTheme:a="system",storageKey:e="vite-ui-theme",...r}){const[s,n]=m.useState(()=>localStorage.getItem(e)||a);m.useEffect(()=>{const d=window.document.documentElement;if(d.classList.remove("light","dark"),s==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";d.classList.add(c);return}d.classList.add(s)},[s]);const i={theme:s,setTheme:d=>{localStorage.setItem(e,d),n(d)}};return o.jsx(ee.Provider,{...r,value:i,children:t})}const re=({...t})=>{const{theme:a="system"}=J();return o.jsx(Z,{theme:a,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-white group-[.toaster]:text-zinc-950 group-[.toaster]:border-zinc-200 group-[.toaster]:shadow-lg dark:group-[.toaster]:bg-zinc-950 dark:group-[.toaster]:text-zinc-50 dark:group-[.toaster]:border-zinc-800",description:"group-[.toast]:text-zinc-500 dark:group-[.toast]:text-zinc-400",actionButton:"group-[.toast]:bg-zinc-900 group-[.toast]:text-zinc-50 dark:group-[.toast]:bg-zinc-50 dark:group-[.toast]:text-zinc-900",cancelButton:"group-[.toast]:bg-zinc-100 group-[.toast]:text-zinc-500 dark:group-[.toast]:bg-zinc-800 dark:group-[.toast]:text-zinc-400"}},...t})};function U(t,a){let e;try{e=t()}catch{return}return{getItem:s=>{var n;const i=c=>c===null?null:JSON.parse(c,void 0),d=(n=e.getItem(s))!=null?n:null;return d instanceof Promise?d.then(i):i(d)},setItem:(s,n)=>e.setItem(s,JSON.stringify(n,void 0)),removeItem:s=>e.removeItem(s)}}const D=t=>a=>{try{const e=t(a);return e instanceof Promise?e:{then(r){return D(r)(e)},catch(r){return this}}}catch(e){return{then(r){return this},catch(r){return D(r)(e)}}}},se=(t,a)=>(e,r,s)=>{let n={storage:U(()=>localStorage),partialize:l=>l,version:0,merge:(l,w)=>({...w,...l}),...a},i=!1;const d=new Set,c=new Set;let h=n.storage;if(!h)return t((...l)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),e(...l)},r,s);const f=()=>{const l=n.partialize({...r()});return h.setItem(n.name,{state:l,version:n.version})},T=s.setState;s.setState=(l,w)=>{T(l,w),f()};const p=t((...l)=>{e(...l),f()},r,s);s.getInitialState=()=>p;let y;const u=()=>{var l,w;if(!h)return;i=!1,d.forEach(x=>{var j;return x((j=r())!=null?j:p)});const E=((w=n.onRehydrateStorage)==null?void 0:w.call(n,(l=r())!=null?l:p))||void 0;return D(h.getItem.bind(h))(n.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==n.version){if(n.migrate){const j=n.migrate(x.state,x.version);return j instanceof Promise?j.then(I=>[!0,I]):[!0,j]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var j;const[I,M]=x;if(y=n.merge(M,(j=r())!=null?j:p),e(y,!0),I)return f()}).then(()=>{E==null||E(y,void 0),y=r(),i=!0,c.forEach(x=>x(y))}).catch(x=>{E==null||E(void 0,x)})};return s.persist={setOptions:l=>{n={...n,...l},l.storage&&(h=l.storage)},clearStorage:()=>{h==null||h.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>u(),hasHydrated:()=>i,onHydrate:l=>(d.add(l),()=>{d.delete(l)}),onFinishHydration:l=>(c.add(l),()=>{c.delete(l)})},n.skipHydration||u(),y||p},ae=se,oe=O()(ae((t,a)=>({currentUser:null,authUser:null,users:[],isLoading:!1,error:null,sessions:[],setCurrentUser:e=>t({currentUser:e}),setAuthUser:e=>t({authUser:e}),updateUserProfile:async(e,r)=>{t({isLoading:!0,error:null});try{if(r.email&&!ne(r.email))throw new Error("Invalid email format");if(r.phone&&!ie(r.phone))throw new Error("Invalid phone number format");const s=ce(r);await new Promise(c=>setTimeout(c,1e3));const{currentUser:n,users:i}=a();if((n==null?void 0:n.id)===e){const c={...n,...s,updatedAt:new Date().toISOString()};t({currentUser:c})}const d=i.map(c=>c.id===e?{...c,...s,updatedAt:new Date().toISOString()}:c);t({users:d,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Failed to update profile";throw t({error:n,isLoading:!1}),s}},updateUserPreferences:async(e,r)=>{var s,n,i,d,c,h,f,T;t({isLoading:!0,error:null});try{if(r.theme&&!["dark","light","system"].includes(r.theme))throw new Error("Invalid theme preference");await new Promise(y=>setTimeout(y,800));const{currentUser:p}=a();if((p==null?void 0:p.id)===e){const y={theme:r.theme||((s=p.preferences)==null?void 0:s.theme)||"dark",language:r.language||((n=p.preferences)==null?void 0:n.language)||"en",timezone:r.timezone||((i=p.preferences)==null?void 0:i.timezone)||"UTC",notifications:{email:!0,push:!0,desktop:!0,mentions:!0,documentUpdates:!0,teamMessages:!0,voiceCalls:!0,quietHours:{enabled:!1,startTime:"22:00",endTime:"08:00"},...(d=p.preferences)==null?void 0:d.notifications,...r.notifications},annotation:{defaultTool:"highlight",defaultColor:"#fbbf24",strokeWidth:2,fontSize:14,autoSave:!0,showOtherAnnotations:!0,realTimeSync:!0,highlightOpacity:.3,...(c=p.preferences)==null?void 0:c.annotation,...r.annotation},collaboration:{showPresence:!0,allowVoiceCalls:!0,allowScreenShare:!0,autoJoinTeamCalls:!1,shareStatus:!0,allowDirectMessages:!0,showTypingIndicators:!0,...(h=p.preferences)==null?void 0:h.collaboration,...r.collaboration},privacy:{profileVisibility:"team",showOnlineStatus:!0,allowContactByEmail:!0,dataProcessingConsent:!0,analyticsOptOut:!1,shareUsageData:!0,...(f=p.preferences)==null?void 0:f.privacy,...r.privacy},accessibility:{highContrast:!1,reducedMotion:!1,fontSize:"medium",screenReaderOptimized:!1,keyboardNavigation:!1,...(T=p.preferences)==null?void 0:T.accessibility,...r.accessibility}};t({currentUser:{...p,preferences:y,updatedAt:new Date().toISOString()},isLoading:!1})}}catch(p){const y=p instanceof Error?p.message:"Failed to update preferences";throw t({error:y,isLoading:!1}),p}},completeOnboarding:async e=>{await a().updateUserProfile(e,{isFirstTimeUser:!1})},fetchUser:async e=>{t({isLoading:!0,error:null});try{await new Promise(s=>setTimeout(s,500));const r={id:e,name:"Current User",email:"user@company.com",avatar:"/images/user-avatar-default.jpg",role:"Team Member",status:"online",color:"#3b82f6",department:"Engineering",joinDate:"2024-01-15",timezone:"UTC-8",phone:"+1 (555) 123-4567",bio:"Passionate about document collaboration and productivity tools.",isFirstTimeUser:!1,lastLoginAt:new Date().toISOString(),createdAt:"2024-01-15T00:00:00Z",updatedAt:new Date().toISOString(),teamAffiliations:[{teamId:"team-1",teamName:"Product Development",role:"Developer",joinedAt:"2024-01-15T00:00:00Z",permissions:[{id:"view",name:"View Documents",description:"View team documents",enabled:!0,scope:"document"},{id:"edit",name:"Edit Documents",description:"Edit team documents",enabled:!0,scope:"document"},{id:"comment",name:"Add Comments",description:"Add comments and annotations",enabled:!0,scope:"document"}]}],preferences:{theme:"dark",language:"en",timezone:"UTC-8",notifications:{email:!0,push:!0,desktop:!0,mentions:!0,documentUpdates:!0,teamMessages:!0,voiceCalls:!0,quietHours:{enabled:!1,startTime:"22:00",endTime:"08:00"}},annotation:{defaultTool:"highlight",defaultColor:"#fbbf24",strokeWidth:2,fontSize:14,autoSave:!0,showOtherAnnotations:!0,realTimeSync:!0,highlightOpacity:.3},collaboration:{showPresence:!0,allowVoiceCalls:!0,allowScreenShare:!0,autoJoinTeamCalls:!1,shareStatus:!0,allowDirectMessages:!0,showTypingIndicators:!0},privacy:{profileVisibility:"team",showOnlineStatus:!0,allowContactByEmail:!0,dataProcessingConsent:!0,analyticsOptOut:!1,shareUsageData:!0},accessibility:{highContrast:!1,reducedMotion:!1,fontSize:"medium",screenReaderOptimized:!1,keyboardNavigation:!1}}};t({currentUser:r,isLoading:!1})}catch(r){const s=r instanceof Error?r.message:"Failed to fetch user";throw t({error:s,isLoading:!1}),r}},uploadAvatar:async e=>{t({isLoading:!0,error:null});try{if(!e.type.startsWith("image/"))throw new Error("File must be an image");if(e.size>5*1024*1024)throw new Error("File size must be less than 5MB");await new Promise(s=>setTimeout(s,1500));const r=`/images/avatars/${Date.now()}-${ue(e.name)}`;return t({isLoading:!1}),r}catch(r){const s=r instanceof Error?r.message:"Failed to upload avatar";throw t({error:s,isLoading:!1}),r}},changePassword:async(e,r)=>{t({isLoading:!0,error:null});try{if(!le(r))throw new Error("Password must be at least 8 characters with uppercase, lowercase, number, and special character");await new Promise(s=>setTimeout(s,1e3)),t({isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Failed to change password";throw t({error:n,isLoading:!1}),s}},enableMFA:async()=>{t({isLoading:!0,error:null});try{await new Promise(r=>setTimeout(r,1e3));const e={qrCode:"data:image/png;base64,mock-qr-code",backupCodes:["ABC123DEF456","GHI789JKL012","MNO345PQR678","STU901VWX234","YZA567BCD890"]};return t({isLoading:!1}),e}catch(e){const r=e instanceof Error?e.message:"Failed to enable MFA";throw t({error:r,isLoading:!1}),e}},disableMFA:async e=>{t({isLoading:!0,error:null});try{if(!e||e.length!==6)throw new Error("Invalid verification code");await new Promise(r=>setTimeout(r,800)),t({isLoading:!1})}catch(r){const s=r instanceof Error?r.message:"Failed to disable MFA";throw t({error:s,isLoading:!1}),r}},fetchUserSessions:async e=>{t({isLoading:!0,error:null});try{await new Promise(s=>setTimeout(s,500));const r=[{id:"session-1",userId:e,deviceInfo:{userAgent:"Chrome 120.0.0.0 on macOS",ip:"192.168.1.100",location:"San Francisco, CA"},createdAt:new Date().toISOString(),lastActiveAt:new Date().toISOString(),expiresAt:new Date(Date.now()+7*24*60*60*1e3).toISOString()}];t({sessions:r,isLoading:!1})}catch(r){const s=r instanceof Error?r.message:"Failed to fetch sessions";throw t({error:s,isLoading:!1}),r}},revokeSession:async e=>{t({isLoading:!0,error:null});try{await new Promise(n=>setTimeout(n,500));const{sessions:r}=a(),s=r.filter(n=>n.id!==e);t({sessions:s,isLoading:!1})}catch(r){const s=r instanceof Error?r.message:"Failed to revoke session";throw t({error:s,isLoading:!1}),r}},clearError:()=>t({error:null}),logout:()=>{t({currentUser:null,authUser:null,sessions:[],error:null})}}),{name:"user-storage",storage:U(()=>localStorage),partialize:t=>({currentUser:t.currentUser,authUser:t.authUser})}));function ne(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function ie(t){return/^\+?[\d\s\-\(\)]+$/.test(t)&&t.replace(/\D/g,"").length>=10}function le(t){const e=/[A-Z]/.test(t),r=/[a-z]/.test(t),s=/\d/.test(t),n=/[!@#$%^&*(),.?":{}|<>]/.test(t);return t.length>=8&&e&&r&&s&&n}function ce(t){const a={};return t.name&&(a.name=t.name.trim().replace(/<[^>]*>/g,"")),t.bio&&(a.bio=t.bio.trim().replace(/<[^>]*>/g,"").substring(0,500)),t.phone&&(a.phone=t.phone.trim()),t.department&&(a.department=t.department.trim().replace(/<[^>]*>/g,"")),t.timezone&&(a.timezone=t.timezone.trim()),t.avatar&&(a.avatar=t.avatar.trim()),a}function ue(t){return t.replace(/[^a-zA-Z0-9.-]/g,"_").toLowerCase()}function z(){const{authUser:t,setAuthUser:a,setCurrentUser:e,clearError:r,logout:s}=oe(),[n,i]=m.useState({isAuthenticated:!!t,isLoading:!1,user:t,error:null});m.useEffect(()=>{i(u=>({...u,isAuthenticated:!!t,user:t}))},[t]);const d=m.useCallback(async u=>{i(l=>({...l,isLoading:!0,error:null}));try{if(!u.email||!u.password)throw new Error("Email and password are required");if(!C(u.email))throw new Error("Invalid email format");await new Promise(E=>setTimeout(E,1e3));const l={id:"user-1",email:u.email,emailVerified:!0,name:"Current User",avatar:"/images/user-avatar-default.jpg",role:{id:"team-member",name:"Team Member",description:"Standard team member with document access",permissions:["view_documents","edit_documents","add_comments"],level:1},permissions:["view_documents","edit_documents","add_comments"],sessionId:k(),lastLoginAt:new Date().toISOString(),mfaEnabled:!1},w={id:l.id,name:l.name,email:l.email,avatar:l.avatar||"/images/user-avatar-default.jpg",role:l.role.name,status:"online",color:"#3b82f6",department:"Engineering",joinDate:"2024-01-15",timezone:"UTC-8",isFirstTimeUser:!1,lastLoginAt:l.lastLoginAt,createdAt:"2024-01-15T00:00:00Z",updatedAt:new Date().toISOString()};a(l),e(w),i({isAuthenticated:!0,isLoading:!1,user:l,error:null}),u.rememberMe&&localStorage.setItem("auth_remember","true")}catch(l){const w=l instanceof Error?l.message:"Login failed";throw i(E=>({...E,isLoading:!1,error:w})),l}},[a,e]),c=m.useCallback(async u=>{i(l=>({...l,isLoading:!0,error:null}));try{if(!u.name||!u.email||!u.password||!u.confirmPassword)throw new Error("All fields are required");if(!C(u.email))throw new Error("Invalid email format");if(u.password!==u.confirmPassword)throw new Error("Passwords do not match");if(!de(u.password))throw new Error("Password must be at least 8 characters with uppercase, lowercase, number, and special character");if(!u.acceptTerms)throw new Error("You must accept the terms and conditions");const l={name:me(u.name),email:u.email.toLowerCase().trim(),password:u.password};await new Promise(w=>setTimeout(w,1500)),i(w=>({...w,isLoading:!1,error:null}))}catch(l){const w=l instanceof Error?l.message:"Registration failed";throw i(E=>({...E,isLoading:!1,error:w})),l}},[]),h=m.useCallback(async()=>{i(u=>({...u,isLoading:!0}));try{await new Promise(u=>setTimeout(u,500)),s(),localStorage.removeItem("auth_remember"),i({isAuthenticated:!1,isLoading:!1,user:null,error:null})}catch{i(l=>({...l,isLoading:!1}))}},[s]),f=m.useCallback(async()=>{if(t)try{await new Promise(l=>setTimeout(l,300));const u={...t,sessionId:k(),lastLoginAt:new Date().toISOString()};a(u)}catch{h()}},[t,a,h]),T=m.useCallback(async u=>{if(!C(u))throw new Error("Invalid email format");return await new Promise(l=>setTimeout(l,1e3)),{message:"Password reset email sent"}},[]),p=m.useCallback(async u=>{if(!u)throw new Error("Verification token is required");return await new Promise(l=>setTimeout(l,800)),{message:"Email verified successfully"}},[]),y=m.useCallback(()=>{i(u=>({...u,error:null})),r()},[r]);return m.useEffect(()=>{if(!t)return;const u=setInterval(()=>{f()},15*60*1e3);return()=>clearInterval(u)},[t,f]),{...n,login:d,register:c,logout:h,refreshToken:f,resetPassword:T,verifyEmail:p,clearError:y}}function C(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function de(t){const e=/[A-Z]/.test(t),r=/[a-z]/.test(t),s=/\d/.test(t),n=/[!@#$%^&*(),.?":{}|<>]/.test(t);return t.length>=8&&e&&r&&s&&n}function me(t){return t.trim().replace(/<[^>]*>/g,"")}function k(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}function R(){return o.jsx("div",{className:"h-screen bg-[#0f1419] flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center mx-auto animate-pulse",children:o.jsx(W,{className:"w-10 h-10 text-white"})}),o.jsx("div",{className:"absolute inset-0 w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl blur-lg opacity-30 animate-ping mx-auto"})]}),o.jsx("h1",{className:"text-2xl font-bold text-gray-200 mb-2",children:"Annotator-App"}),o.jsx("div",{className:"text-purple-400 text-sm font-medium mb-6",children:"Supreme Editionâ„¢"}),o.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce [animation-delay:-0.3s]"}),o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce [animation-delay:-0.15s]"}),o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"})]}),o.jsx("p",{className:"text-gray-400 mt-4 text-sm",children:"Initializing collaboration workspace..."})]})})}const he=m.lazy(()=>v(()=>import("./LoginPage-YZ6VqEmc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),pe=m.lazy(()=>v(()=>import("./RegisterPage-CGwfG64r.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),fe=m.lazy(()=>v(()=>import("./ForgotPasswordPage-DVtGYe4V.js"),__vite__mapDeps([17,1,2,3,4,6,7,8,9,10,12]))),ge=m.lazy(()=>v(()=>import("./ResetPasswordPage-B71arW9n.js"),__vite__mapDeps([18,1,2,3,4,6,7,8,9,10,12]))),we=m.lazy(()=>v(()=>import("./VerifyEmailPage-CDvhpsMR.js"),__vite__mapDeps([19,1,2,6,7,10,12]))),ye=m.lazy(()=>v(()=>import("./MFASetupPage-B44BdP3S.js"),__vite__mapDeps([20,1,2,21,6,7,8,9,10,12,14,15]))),xe=m.lazy(()=>v(()=>import("./MFAVerifyPage-CEQ3PeYa.js"),__vite__mapDeps([22,1,2,21,6,7,8,9,10,12,23,14,15]))),be=m.lazy(()=>v(()=>import("./OAuthCallbackPage-CPJKxmF0.js"),__vite__mapDeps([24,1,2,5,10,6,7,12,14,15]))),ve=m.lazy(()=>v(()=>import("./DashboardPage-BffF6OEb.js"),__vite__mapDeps([25,1,2,7,6,8,9,26,12,10,27,28,29,14,15]))),Ee=m.lazy(()=>v(()=>import("./DocLibraryPage-DFnBC9Em.js"),__vite__mapDeps([30,1,2,6,7,8,28,15,14]))),je=m.lazy(()=>v(()=>import("./DocumentViewerPage-BJ-9P4di.js"),__vite__mapDeps([31,1,2,14,7,6,27,28,29,26,32,10,3,4,33,8,9,23,13,34,12,15]))),Se=m.lazy(()=>v(()=>import("./ProfilePage-BpcJW9Ic.js"),__vite__mapDeps([35,1,2,32,6,7,10,28,26,3,4,33,8,9,23,27,13,34,14,15]))),Pe=m.lazy(()=>v(()=>import("./SettingsPage-CMpotkn7.js"),__vite__mapDeps([36,1,2,6,7,10,28,27,14,15]))),Te=m.lazy(()=>v(()=>import("./PDFTestViewer-BDYdw0iv.js"),__vite__mapDeps([37,1,2,14,7,38])).then(t=>({default:t.PDFTestViewer})));function S({children:t,requireMFA:a=!1,requiredPermissions:e=[],requiredRole:r}){const{isAuthenticated:s,isLoading:n,user:i}=z();return n?o.jsx(R,{}):s?a&&!(i!=null&&i.mfaEnabled)?o.jsx(P,{to:"/auth/mfa/setup",replace:!0}):e.length>0&&!e.every(c=>i==null?void 0:i.permissions.includes(c))?o.jsx(P,{to:"/dashboard",replace:!0}):r&&(i==null?void 0:i.role.name)!==r?o.jsx(P,{to:"/dashboard",replace:!0}):o.jsx(o.Fragment,{children:t}):o.jsx(P,{to:"/auth/login",replace:!0})}function A({children:t}){const{isAuthenticated:a,isLoading:e}=z();return e?o.jsx(R,{}):a?o.jsx(P,{to:"/dashboard",replace:!0}):o.jsx(o.Fragment,{children:t})}function b({children:t}){return o.jsx(m.Suspense,{fallback:o.jsx(R,{}),children:t})}function Le(){return o.jsxs(B,{children:[o.jsx(g,{path:"/auth/login",element:o.jsx(A,{children:o.jsx(b,{children:o.jsx(he,{})})})}),o.jsx(g,{path:"/auth/register",element:o.jsx(A,{children:o.jsx(b,{children:o.jsx(pe,{})})})}),o.jsx(g,{path:"/auth/forgot-password",element:o.jsx(A,{children:o.jsx(b,{children:o.jsx(fe,{})})})}),o.jsx(g,{path:"/auth/reset-password",element:o.jsx(A,{children:o.jsx(b,{children:o.jsx(ge,{})})})}),o.jsx(g,{path:"/auth/verify-email",element:o.jsx(A,{children:o.jsx(b,{children:o.jsx(we,{})})})}),o.jsx(g,{path:"/auth/callback",element:o.jsx(b,{children:o.jsx(be,{})})}),o.jsx(g,{path:"/auth/mfa/setup",element:o.jsx(S,{children:o.jsx(b,{children:o.jsx(ye,{})})})}),o.jsx(g,{path:"/auth/mfa/verify",element:o.jsx(S,{children:o.jsx(b,{children:o.jsx(xe,{})})})}),o.jsx(g,{path:"/dashboard",element:o.jsx(S,{children:o.jsx(b,{children:o.jsx(ve,{})})})}),o.jsx(g,{path:"/doc-library",element:o.jsx(S,{children:o.jsx(b,{children:o.jsx(Ee,{})})})}),o.jsx(g,{path:"/document/:documentId",element:o.jsx(S,{requiredPermissions:["view_documents"],children:o.jsx(b,{children:o.jsx(je,{})})})}),o.jsx(g,{path:"/profile",element:o.jsx(S,{children:o.jsx(b,{children:o.jsx(Se,{})})})}),o.jsx(g,{path:"/settings",element:o.jsx(S,{children:o.jsx(b,{children:o.jsx(Pe,{})})})}),o.jsx(g,{path:"/test/pdf",element:o.jsx(S,{children:o.jsx(b,{children:o.jsx(Te,{})})})}),o.jsx(g,{path:"/",element:o.jsx(P,{to:"/dashboard",replace:!0})}),o.jsx(g,{path:"/auth",element:o.jsx(P,{to:"/auth/login",replace:!0})}),o.jsx(g,{path:"*",element:o.jsx("div",{className:"min-h-screen bg-[#0f1419] flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-200 mb-4",children:"404"}),o.jsx("p",{className:"text-gray-400 mb-8",children:"Page not found"}),o.jsx(P,{to:"/dashboard",replace:!0})]})})})]})}const Ae={csp:{enabled:!1,reportOnly:!1,directives:{"default-src":["'self'"],"script-src":["'self'","'unsafe-inline'","'unsafe-eval'","https://apis.google.com","https://accounts.google.com"],"style-src":["'self'","'unsafe-inline'","https://fonts.googleapis.com"],"img-src":["'self'","data:","https:","blob:"],"font-src":["'self'","data:","https://fonts.gstatic.com"],"connect-src":["'self'","https://api.qrserver.com","https://accounts.google.com","https://github.com","wss://localhost:*","ws://localhost:*"],"frame-src":["'none'"],"object-src":["'none'"],"base-uri":["'self'"],"form-action":["'self'"],"frame-ancestors":["'none'"],"upgrade-insecure-requests":[]}},headers:{hsts:{enabled:!1,maxAge:31536e3,includeSubDomains:!0,preload:!0},xssProtection:{enabled:!1,mode:"block"},contentTypeOptions:{enabled:!1},referrerPolicy:{enabled:!1,policy:"strict-origin-when-cross-origin"},permissionsPolicy:{enabled:!1,directives:{camera:[],microphone:[],geolocation:[],payment:[],usb:[],magnetometer:[],gyroscope:[],accelerometer:[]}}},rateLimit:{enabled:!1,windowMs:parseInt("900000"),maxRequests:parseInt("100"),skipSuccessfulRequests:!1,skipFailedRequests:!1},auth:{tokenExpiry:parseInt("3600000"),refreshTokenExpiry:parseInt("604800000"),sessionTimeout:parseInt("1800000"),maxLoginAttempts:parseInt("5"),lockoutDuration:parseInt("900000"),requireMfaForRoles:["Enterprise User","Admin","Team Lead"],passwordPolicy:{minLength:8,requireUppercase:!0,requireLowercase:!0,requireNumbers:!0,requireSpecialChars:!0,preventCommonPasswords:!0,preventReuse:5}},upload:{maxFileSize:parseInt("52428800"),allowedTypes:"".split(",").filter(Boolean),maxFiles:parseInt("10"),scanForMalware:!0,quarantineDirectory:"/tmp/quarantine"},encryption:{algorithm:"AES-256-GCM",keyLength:32,ivLength:16,saltLength:32},audit:{enabled:!1,logLevel:"info",retentionDays:90,sensitiveFields:["password","token","secret","key","ssn","creditCard","bankAccount"]}};function _e(){return Ae}function Ie(t,a){var s;if(t.size>a.maxFileSize)return{valid:!1,error:`File size exceeds maximum allowed size of ${a.maxFileSize} bytes`};if(a.allowedTypes.length>0&&!a.allowedTypes.includes(t.type))return{valid:!1,error:`File type ${t.type} is not allowed`};const e=(s=t.name.split(".").pop())==null?void 0:s.toLowerCase(),r=a.allowedTypes.map(n=>({"application/pdf":"pdf","application/msword":"doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","text/plain":"txt","application/vnd.ms-powerpoint":"ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx"})[n]).filter(Boolean);return r.length>0&&e&&!r.includes(e)?{valid:!1,error:`File extension .${e} is not allowed`}:{valid:!0}}const Ce=_e();class De{constructor(a,e=3e4){L(this,"baseUrl");L(this,"timeout");this.baseUrl=a||"http://localhost:3001",this.timeout=e}async request(a,e={}){const r=`${this.baseUrl}${a}`,s=new AbortController,n=setTimeout(()=>s.abort(),this.timeout);try{const i={"Content-Type":"application/json",...e.headers},d=this.getAuthToken();d&&(i.Authorization=`Bearer ${d}`);const c=await fetch(r,{...e,headers:i,signal:s.signal});if(clearTimeout(n),!c.ok){const f=await c.json().catch(()=>({}));throw{message:f.message||`HTTP ${c.status}: ${c.statusText}`,code:f.code,status:c.status,details:f}}const h=await c.json();return{data:h.data||h,message:h.message,success:!0}}catch(i){throw clearTimeout(n),i.name==="AbortError"?{message:"Request timeout",code:"TIMEOUT",status:408}:i.status?i:{message:"Network error",code:"NETWORK_ERROR",status:0,details:i}}}async get(a,e){const r=e?`${a}?${new URLSearchParams(e)}`:a;return this.request(r,{method:"GET"})}async post(a,e){return this.request(a,{method:"POST",body:e?JSON.stringify(e):void 0})}async put(a,e){return this.request(a,{method:"PUT",body:e?JSON.stringify(e):void 0})}async patch(a,e){return this.request(a,{method:"PATCH",body:e?JSON.stringify(e):void 0})}async delete(a){return this.request(a,{method:"DELETE"})}async upload(a,e){const r=`${this.baseUrl}${a}`,s=new AbortController,n=setTimeout(()=>s.abort(),this.timeout);try{const i={},d=this.getAuthToken();d&&(i.Authorization=`Bearer ${d}`);const c=await fetch(r,{method:"POST",headers:i,body:e,signal:s.signal});if(clearTimeout(n),!c.ok){const f=await c.json().catch(()=>({}));throw{message:f.message||`HTTP ${c.status}: ${c.statusText}`,code:f.code,status:c.status,details:f}}const h=await c.json();return{data:h.data||h,message:h.message,success:!0}}catch(i){throw clearTimeout(n),i.name==="AbortError"?{message:"Upload timeout",code:"TIMEOUT",status:408}:i.status?i:{message:"Upload failed",code:"UPLOAD_ERROR",status:0,details:i}}}async download(a){const e=`${this.baseUrl}${a}`,r=new AbortController,s=setTimeout(()=>r.abort(),this.timeout);try{const n={},i=this.getAuthToken();i&&(n.Authorization=`Bearer ${i}`);const d=await fetch(e,{method:"GET",headers:n,signal:r.signal});if(clearTimeout(s),!d.ok)throw{message:`Download failed: ${d.status}`,code:"DOWNLOAD_ERROR",status:d.status};return await d.blob()}catch(n){throw clearTimeout(s),n.name==="AbortError"?{message:"Download timeout",code:"TIMEOUT",status:408}:n}}getAuthToken(){try{return localStorage.getItem("auth_token")}catch(a){return console.warn("Failed to get auth token:",a),null}}setAuthToken(a){try{localStorage.setItem("auth_token",a)}catch(e){console.warn("Failed to set auth token:",e)}}clearAuthToken(){try{localStorage.removeItem("auth_token")}catch(a){console.warn("Failed to clear auth token:",a)}}isAuthenticated(){return!!this.getAuthToken()}}class Re{constructor(a,e){L(this,"apiClient");L(this,"uploadConfig");L(this,"storageType");this.apiClient=new De(a),this.uploadConfig=e,this.storageType="local"}async uploadFile(a,e={}){const r=Ie(a,this.uploadConfig);if(!r.valid)throw new Error(r.error);const s=new FormData;s.append("file",a),s.append("metadata",JSON.stringify(e)),s.append("storageType",this.storageType),e.folderId&&s.append("folderId",e.folderId);try{const i=(await this.apiClient.upload("/api/files/upload",s)).data;return this.uploadConfig.scanForMalware&&await this.performVirusScan(i.id),i}catch(n){throw console.error("File upload error:",n),n instanceof Error?n:new Error("Upload failed")}}async getFiles(a,e=1,r=50){const s={page:e.toString(),limit:r.toString()};a&&(s.folderId=a);try{return(await this.apiClient.get("/api/files",s)).data}catch(n){throw console.error("Get files error:",n),n instanceof Error?n:new Error("Failed to fetch files")}}async deleteFile(a){try{await this.apiClient.delete(`/api/files/${a}`)}catch(e){throw console.error("Delete file error:",e),e instanceof Error?e:new Error("Failed to delete file")}}async createFolder(a,e){try{return(await this.apiClient.post("/api/folders",{name:a,parentId:e})).data}catch(r){throw console.error("Create folder error:",r),r instanceof Error?r:new Error("Failed to create folder")}}async deleteFolder(a){try{await this.apiClient.delete(`/api/folders/${a}`)}catch(e){throw console.error("Delete folder error:",e),e instanceof Error?e:new Error("Failed to delete folder")}}async shareFile(a){try{await this.apiClient.post("/api/files/share",a)}catch(e){throw console.error("Share file error:",e),e instanceof Error?e:new Error("Failed to share file")}}async getDownloadUrl(a){try{return(await this.apiClient.get(`/api/files/${a}/download-url`)).data.downloadUrl}catch(e){throw console.error("Get download URL error:",e),e instanceof Error?e:new Error("Failed to get download URL")}}async searchFiles(a,e){const r={q:a};e&&(r.folderId=e);try{return(await this.apiClient.get("/api/files/search",r)).data}catch(s){throw console.error("Search files error:",s),s instanceof Error?s:new Error("Search failed")}}async performVirusScan(a){var e;try{const s=(await this.apiClient.post(`/api/files/${a}/scan`)).data;if(!s.clean)throw new Error(`File contains threats: ${(e=s.threats)==null?void 0:e.join(", ")}`);return s}catch(r){throw console.error("Virus scan error:",r),r instanceof Error?r:new Error("Virus scan failed")}}}const Fe=O((t,a)=>({currentDocument:null,documents:[],users:[],currentPage:1,totalPages:1,scale:1,isLoading:!1,error:null,annotations:[],selectedAnnotation:null,isAnnotating:!1,currentTool:{id:"select",name:"Select",icon:"MousePointer",type:"select"},chatMessages:[],isTyping:!1,typingUsers:[],userPresence:[],sidebarCollapsed:!1,activePanel:"chat",fileStorageService:new Re("http://localhost:3001",Ce.upload),setCurrentDocument:e=>t({currentDocument:e}),setCurrentPage:e=>t({currentPage:e}),setScale:e=>t({scale:Math.max(.5,Math.min(3,e))}),addAnnotation:e=>t(r=>({annotations:[...r.annotations,e]})),updateAnnotation:(e,r)=>t(s=>({annotations:s.annotations.map(n=>n.id===e?{...n,...r}:n)})),deleteAnnotation:e=>t(r=>({annotations:r.annotations.filter(s=>s.id!==e)})),setSelectedAnnotation:e=>t({selectedAnnotation:e}),setCurrentTool:e=>t({currentTool:e}),addChatMessage:e=>t(r=>({chatMessages:[...r.chatMessages,e]})),setIsTyping:e=>t({isTyping:e}),updateUserPresence:e=>t(r=>({userPresence:[...r.userPresence.filter(s=>s.userId!==e.userId),e]})),setSidebarCollapsed:e=>t({sidebarCollapsed:e}),setActivePanel:e=>t({activePanel:e}),loadInitialData:async()=>{var e;t({isLoading:!0,error:null});try{const s=await(await fetch("/data/users.json")).json(),i=await(await fetch("/data/documents.json")).json(),c=await(await fetch("/data/chat-messages.json")).json(),f=await(await fetch("/data/annotations.json")).json();t({users:s,documents:i,chatMessages:c,annotations:f,currentDocument:i[0]||null,totalPages:((e=i[0])==null?void 0:e.totalPages)||1,isLoading:!1,error:null})}catch(r){console.error("Failed to load initial data:",r),t({isLoading:!1,error:"Failed to load application data. Please refresh the page."})}},loadDocument:async e=>{t({isLoading:!0,error:null});try{const{documents:r}=a();let s=r.find(h=>h.id===e);s||(await new Promise(h=>setTimeout(h,1e3)),s={id:e,title:`Document ${e}`,fileName:"sample-report.pdf",filePath:"/documents/sample-report.pdf",uploadDate:new Date().toISOString(),uploadedBy:"user-1",fileSize:"2.4 MB",totalPages:15,status:"active",participants:["user-1"],lastModified:new Date().toISOString(),description:"Sample PDF document for testing",tags:["sample","test"]});const i=await(await fetch(`/data/annotations.json?documentId=${e}`)).json(),c=await(await fetch(`/data/chat-messages.json?documentId=${e}`)).json();t({currentDocument:s,annotations:i,chatMessages:c,totalPages:s.totalPages,currentPage:1,isLoading:!1,error:null})}catch(r){console.error("Failed to load document:",r),t({isLoading:!1,error:"Failed to load document. Please try again."})}},clearError:()=>t({error:null}),uploadDocument:async(e,r)=>{t({isLoading:!0,error:null});try{const{fileStorageService:s}=a(),n=await s.uploadFile(e,r),i={id:n.id,title:r.title||n.name,fileName:n.name,filePath:n.url,uploadDate:n.createdAt,uploadedBy:"current-user",fileSize:`${(n.size/1024/1024).toFixed(1)} MB`,totalPages:0,status:"active",participants:["current-user"],lastModified:n.createdAt,description:r.description||"",tags:r.tags||[]};return t(d=>({documents:[...d.documents,i],isLoading:!1})),i}catch(s){const n=s instanceof Error?s.message:"Failed to upload document";throw t({error:n,isLoading:!1}),s}}}));function ke(){const t=Fe(a=>a.loadInitialData);return m.useEffect(()=>{t()},[t]),o.jsx(te,{defaultTheme:"dark",storageKey:"annotator-ui-theme",children:o.jsxs("div",{className:"min-h-screen bg-[#0f1419] font-sans antialiased",children:[o.jsx(Le,{}),o.jsx(re,{theme:"dark",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-[#1a1f2e] group-[.toaster]:text-gray-200 group-[.toaster]:border-gray-700"}}})]})})}K.createRoot(document.getElementById("root")).render(o.jsx(m.StrictMode,{children:o.jsx(Q,{children:o.jsx(H,{children:o.jsx(ke,{})})})}));export{Re as F,R as L,oe as a,Fe as b,Ce as s,z as u};
